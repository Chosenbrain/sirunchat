{"version":3,"sources":["api/api.ts","actions/types.ts","actions/alertActions.ts","actions/chatActions.ts","actions/friendActions.ts","notifications.ts","actions/authActions.ts","reducers/authReducer.ts","reducers/alertReducer.ts","reducers/friendsReducer.ts","reducers/chatReducer.ts","reducers/videoChatReducer.ts","reducers/roomReducer.ts","store/index.ts","actions/videoChatActions.ts","actions/roomActions.ts","socket/webRTC.ts","socket/roomHandler.ts","socket/socketConnection.ts","components/VideoChat/Video.tsx","utils/hooks/useVideoSize.ts","utils/getVideoBoxSize.ts","components/VideoChat/VideosContainer.tsx","components/VideoChat/RoomButtons/Camera.tsx","components/VideoChat/RoomButtons/Microphone.tsx","components/VideoChat/RoomButtons/CloseRoom.tsx","components/VideoChat/RoomButtons/ScreenShare.tsx","components/VideoChat/ResizeRoomButton.tsx","components/VideoChat/RoomButtons/index.tsx","components/VideoChat/index.tsx","components/IncomingCall.tsx","pages/Dashboard/Messenger/robot.gif","pages/Dashboard/Messenger/WelcomeMessage.tsx","components/Avatar.tsx","actions/groupChatActions.ts","pages/Dashboard/Messenger/Messages/AddMembersToGroupDialog.tsx","pages/Dashboard/Messenger/Messages/GroupParticipantsDialog.tsx","pages/Dashboard/Messenger/Messages/ChatDropDown.tsx","pages/Dashboard/Messenger/Messages/Header.tsx","pages/Dashboard/Messenger/Messages/Message.tsx","pages/Dashboard/Messenger/Messages/DateSeparator.tsx","pages/Dashboard/Messenger/Messages/index.tsx","pages/Dashboard/Messenger/NewMessageInput.tsx","pages/Dashboard/Messenger/Typing.tsx","pages/Dashboard/Messenger/dots.gif","pages/Dashboard/Messenger/ChatDetails.tsx","pages/Dashboard/Messenger/Messenger.tsx","utils/validators.ts","pages/Dashboard/FriendsSideBar/AddFriendDialog.tsx","pages/Dashboard/FriendsSideBar/AddFriendButton.tsx","pages/Dashboard/FriendsSideBar/FriendsList/OnlineIndicator.tsx","pages/Dashboard/FriendsSideBar/FriendsList/FriendsListItem.tsx","pages/Dashboard/FriendsSideBar/FriendsList/FriendsList.tsx","pages/Dashboard/FriendsSideBar/FriendsTitle.tsx","pages/Dashboard/FriendsSideBar/PendingInvitationsList/InvitationDecisionButtons.tsx","pages/Dashboard/FriendsSideBar/PendingInvitationsList/PendingInvitationsListItem.tsx","pages/Dashboard/FriendsSideBar/PendingInvitationsList/PendingInvitationsList.tsx","pages/Dashboard/Drawer/RoomParticipantsDialog.tsx","pages/Dashboard/Drawer/DropdownMenu.tsx","pages/Dashboard/Drawer/CreateRoomButton.tsx","pages/Dashboard/Drawer/CreateGroupChatDialog.tsx","pages/Dashboard/Drawer/CreateGroupChatButton.tsx","pages/Dashboard/FriendsSideBar/GroupChatList/GroupChatListItem.tsx","pages/Dashboard/FriendsSideBar/GroupChatList/index.tsx","pages/Dashboard/ActiveRooms/ActiveRoomButton.tsx","pages/Dashboard/ActiveRooms/index.tsx","pages/Dashboard/Drawer/index.tsx","pages/Dashboard/index.tsx","assets/sirun-logo.png","pages/Login.tsx","pages/Register.tsx","components/AlertNotification.tsx","components/Loading.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["api","axios","create","baseURL","interceptors","request","use","config","userDetails","localStorage","getItem","token","JSON","parse","console","log","headers","err","Promise","reject","checkForAuthorization","error","_error$response","responseCode","response","status","clear","window","location","pathname","saveuserSubscription","async","post","subscription","actionTypes","showAlert","message","type","payload","setMessages","messages","addNewMessage","resetChatAction","resetChat","inviteFriend","email","closeDialogHandler","_ref3","data","inviteFriendRequest","dispatch","rejectInvitation","invitationId","rejectFriendRequest","acceptInvitation","acceptFriendRequest","removeFriendAction","_ref","friendId","friendName","removeFriend","convertedVapidKey","base64String","padding","repeat","length","base64","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt","urlBase64ToUint8Array","process","REACT_APP_VAPID_PUBLIC_KEY","unsubscribeUserToPush","callback","navigator","serviceWorker","ready","then","registration","pushManager","getSubscription","removeUserSubscription","info","unsubscribe","catch","alert","loginUser","credentials","password","login","authError","setItem","stringify","authenticate","username","registerUser","_ref2","register","autoLogin","authLoading","currentUser","me","get","statusCode","_err$response","getMe","logoutUser","removeItem","logout","resetFriends","initialState","errorMessage","loading","open","friends","pendingInvitations","onlineUsers","groupChatList","ChatTypes","chosenChatDetails","chosenGroupChatDetails","typing","chatType","direct","localStream","remoteStream","otherUserId","audioOnly","screenSharingStream","screenSharing","callRequest","callStatus","videoChatReducer","state","arguments","undefined","action","setLocalStream","setRemoteStream","setCallRequest","setCallStatus","setOtherUserId","resetVideoChatState","setScreenSharingStream","stream","isScreenSharing","setAudioOnly","initState","isUserInRoom","isUserRoomCreator","roomDetails","activeRooms","localStreamRoom","remoteStreams","isScreenSharingActive","isUserJoinedWithOnlyAudio","rootReducer","combineReducers","auth","hideAlert","setPendingInvitations","setFriends","setOnlineUsers","setGroupChatList","chat","_action$payload$isOnl","setChosenChatDetails","userId","isOnline","setChosenGroupChatDetails","setInitialTypingStatus","setTyping","map","item","videoChat","room","openRoom","setRoomDetails","setActiveRooms","setLocalStreamRoom","setAudioOnlyRoom","setRemoteStreams","setScreenSharingStreamRoom","setIsUserJoinedWithAudioOnly","store","createStore","composeWithDevTools","applyMiddleware","thunk","useAppSelector","useSelector","callerUserId","clearVideoChat","getState","getTracks","forEach","track","stop","setOpenRoom","setIsUserJoinedOnlyWithAudio","onlyWithAudio","getLocalStreamPreview","constraints","audio","video","mediaDevices","getUserMedia","peerConfiguration","warn","iceServers","urls","newPeerConnection","initiator","Error","configuration","Peer","trickle","peers","prepareNewPeerConnection","connUserSocketId","isInitiator","on","signalPeerData","signal","addNewRemoteStream","newRemoteStreams","switchOutgoingTracks","socket_id","index","streams","index2","kind","replaceTrack","leaveRoom","_store$getState$room$","roomId","Object","entries","mappedObject","destroy","socketConnection","currentPeerConnection","socket","connectWithSocketServer","io","id","emit","typingStatusOfFriends","friend","chatList","participants","chatDetails","receiverId","senderId","_id","includes","groupChatId","groupChatDetails","groupId","newMessage","senderUserId","newRoomCreated","rooms","roomCreator","push","f","updateActiveRooms","initialRoomsUpdate","handleSignalingData","filter","handleParticipantLeftRoom","handleFileUpload","file","receiverUserId","Math","random","toString","substr","content","name","author","createdAt","Date","toISOString","peerConnection","peer","accepted","callResponse","_store$getState$video","createNewRoom","joinRoom","MainContainer","styled","borderRadius","width","height","VideoEl","display","maxWidth","backgroundColor","Video","isLocalStream","dimensions","videoRef","useRef","useEffect","current","srcObject","onloadedmetadata","play","muted","volume","_jsx","style","y","x","children","ref","autoPlay","useVideoSize","N","AR","size","setSize","useState","isMobile","setIsMobile","matchMedia","matches","listener","e","addEventListener","removeEventListener","Y","innerHeight","X","innerWidth","n","aspect_ratio","tile_count","b","a","sizeX","sqrt","numberOfPossibleWholeTilesH","floor","numberOfPossibleWholeTilesW","total","getVideoBoxSize","overflowY","margin","flexDirection","justifyContent","gap","alignItems","flexWrap","VideosContainer","isRoomMinimized","screenSharingStreamRoom","useMediaQuery","xDirectCall","yDirectCall","_jsxs","sx","Typography","color","fontSize","fontWeight","Camera","cameraEnabled","setCameraEnabled","IconButton","onClick","handleToggleCamera","getVideoTracks","enabled","VideocamIcon","VideocamOffIcon","Microphone","micEnabled","setMicEnabled","handleToggleMic","getAudioTracks","MicIcon","MicOffIcon","CloseRoom","useDispatch","handleLeaveRoom","CloseIcon","ScreenShare","screenShareEnabled","setScreenShareEnabled","handleDirectCall","_videoChat$screenShar2","_videoChat$screenShar","screenShareStream","getDisplayMedia","handleRoomCall","_room$screenSharingSt","t","StopScreenShareIcon","ScreenShareIcon","ResizeRoomButton","handleRoomResize","OpenInFullIcon","CloseFullscreenIcon","borderTopLeftRadius","borderTopRightRadius","RoomButtons","_Fragment","position","transition","fullScreenRoomStyle","zIndex","minimizedRoomStyle","top","right","VideoChat","setIsRoomMinimized","xs","sm","roomResizeHandler","IncomingCall","handleCall","Backdrop","theme","drawer","marginBottom","callerName","PhoneInTalkIcon","PhoneDisabledIcon","Wrapper","flexGrow","textAlign","WelcomeMessage","src","Robot","alt","variant","AvatarPreview","Avatar","large","substring","createGroupChatAction","createGroupChat","addMembersToGroupAction","args","friendIds","addMembersToGroup","leaveGroupAction","leaveGroup","deleteGroupAction","groupChatName","deleteGroup","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","getStyles","personName","indexOf","typography","fontWeightRegular","fontWeightMedium","AddMembersToGroupDialog","isDialogOpen","currentGroupMembers","participant","useTheme","setFriendIds","React","handleCloseDialog","Dialog","onClose","DialogTitle","groupName","DialogContent","DialogContentText","FormControl","m","InputLabel","Select","labelId","multiple","value","onChange","event","target","split","input","OutlinedInput","label","MenuItem","DialogActions","Button","bgcolor","textTransform","marginLeft","marginRight","handleClick","disabled","GroupParticipantsDialog","groupDetails","currentUserId","List","_groupDetails$admin","Fragment","ListItem","ListItemAvatar","ListItemText","primary","secondary","component","admin","Divider","ChatDropDown","anchorEl","setAnchorEl","Boolean","setIsDialogOpen","participantsDialogOpen","setParticipantsDialogOpen","currentTarget","MoreVertIcon","Menu","handleMenuClose","MenuListProps","handleOpenDialog","handleDeleteGroup","handleLeaveGroup","handleParticipantsOpenDialog","handleRemoveFriend","handleParticipantsCloseDialog","background","boxShadow","DesktopChatDropDown","CenterSection","flex","StatusText","marginTop","CallButtons","MessagesHeader","scrollPosition","navRef","isMobileMenuOpen","handleDeleteChat","deleteChat","AddIcCallIcon","VideoCallIcon","DeleteIcon","md","MenuIcon","handleMobileMenuClose","keepMounted","anchorOrigin","vertical","horizontal","transformOrigin","_userDetails$username","_userDetails$username2","PersonRemoveIcon","formatDate","date","hours","getHours","minutes","getMinutes","ampm","AvatarContainer","MessageContainer","Message","sameAuthor","incomingMessage","Separator","DateLabel","left","transform","DateSeparator","toDateString","overflow","overflowX","Messages","_chat$chosenChatDetai","_chat$chosenChatDetai2","messagesEndRef","setScrollPosition","fetchGroupChatHistory","scrollIntoView","behavior","onScroll","scrollTop","_messages","thisMessageDate","prevMessageDate","isSameDay","Picker","lazy","module","default","Input","border","outline","SendButton","EmojiPickerContainer","bottom","NewMessageInput","setMessage","focused","setFocused","showEmojiPicker","setShowEmojiPicker","handleSendMessage","trim","sendGroupMessage","prev","InsertEmoticonIcon","placeholder","onKeyDown","key","onFocus","onBlur","SendIcon","Suspense","fallback","set","onSelect","emoji","native","GifContainer","Typing","isTyping","find","ChatDetails","Messenger","validateLoginForm","errors","validateMail","validatePassword","validateRegisterForm","validateUsername","test","Label","AddFriendDialog","setEmail","isFormValid","setIsFormValid","AddFriendButton","handleOpenAddFriendDialog","handleCloseAddFriendDialog","OnlineIndicator","Box","FiberManualRecordIcon","FriendsListItem","onSelectFriend","breakpoints","up","isFriendTyping","isChatActive","Tooltip","title","align","FriendsList","modifiedFriends","user","handleSelectFriend","FriendsTitle","MailIcon","GroupsIcon","InboxIcon","InvitationDecisionButtons","CheckIcon","ClearIcon","PendingInvitationsListItem","PendingInvitationsList","invitation","RoomParticipantsDialog","_roomDetails$roomCrea","DropDownMenu","checked","setChecked","existingSubscription","Notification","permission","handleAudioOnlyChange","Switch","handleToggle","resolve","permissionResult","requestPermission","result","subscribeOptions","userVisibleOnly","applicationServerKey","subscribe","newSubscription","CreateRoomButton","createNewRoomHandler","successCallbackFunc","minWidth","AddIcon","CreateGroupChatDialog","setName","validateGroupName","CreateGroupChatButton","handleOpenGroupChatDialog","GroupAddIcon","handleCloseGroupChatDialog","GroupChatListItem","GroupChatList","ActiveRoomButton","creatorUsername","alreadyInDirectCall","activeRoomButtonDisabled","roomTitle","handleJoinActiveRoom","ActiveRooms","drawerWidth","ResponsiveDrawer","props","mobileOpen","setMobileOpen","handleDrawerToggle","drawerContent","hasActiveRooms","hasFriends","hasGroupChats","hasInvitations","container","document","body","CssBaseline","edge","mr","flexShrink","Drawer","ModalProps","boxSizing","Dashboard","navigate","useNavigate","Background","minHeight","FormCard","Paper","animation","from","opacity","to","Logo","borderColor","ErrorText","StyledButton","RedirectText","cursor","Login","setCredentials","showPassword","setShowPassword","setErrors","handleChange","keys","elevation","SirunLogo","mb","togglePasswordVisibility","VisibilityOff","Visibility","handleLogin","validationErrors","mt","Register","handleRegister","AlertNotification","Snackbar","handleClose","autoHideDuration","Alert","severity","Loading","CircularProgress","App","BrowserRouter","Routes","Route","path","element","Navigate","isLocalhost","hostname","match","registerValidSW","swUrl","scope","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","Provider","getElementById","URL","href","origin","fetch","contentType","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.a1581f76.chunk.js","sourcesContent":["import axios from 'axios';\nimport {\n  LoginArgs,\n  AuthResponse,\n  RegisterArgs,\n  InviteFriendArgs,\n  GetMeResponse,\n  AddMembersToGroupArgs,\n  LeaveGroupArgs,\n  RemoveFriendArgs,\n  DeleteGroupArgs,\n} from './types';\n\nconst BASE_URL = 'http://localhost:5000';\n\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n});\n\napi.interceptors.request.use(\n  (config) => {\n    const userDetails = localStorage.getItem('currentUser');\n\n    if (userDetails) {\n      const token = JSON.parse(userDetails).token;\n      console.log(token);\n      config.headers!['Authorization'] = `Bearer ${token}`;\n    }\n\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\nconst logOut = () => {\n  localStorage.clear();\n  window.location.pathname = '/login';\n};\n\nconst checkForAuthorization = (error: any) => {\n  const responseCode = error?.response?.status;\n\n  if (responseCode) {\n    responseCode === 401 && logOut();\n  }\n};\n\nexport const login = async ({ email, password }: LoginArgs) => {\n  try {\n    const res = await api.post<AuthResponse>('/api/auth/login', {\n      email,\n      password,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const register = async ({\n  email,\n  password,\n  username,\n}: RegisterArgs) => {\n  try {\n    const res = await api.post<AuthResponse>('/api/auth/register', {\n      email,\n      password,\n      username,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\n// protected routes\n\nexport const getMe = async () => {\n  try {\n    const res = await api.get<GetMeResponse>('/api/auth/me');\n\n    return {\n      me: res.data.me,\n      statusCode: 200,\n    };\n  } catch (err: any) {\n    console.log(err);\n    return {\n      error: true,\n      // message: err.response.data,\n      statusCode: err?.response?.status,\n    };\n  }\n};\n\nexport const inviteFriendRequest = async ({\n  email,\n}: InviteFriendArgs) => {\n  try {\n    const res = await api.post('/api/invite-friend/invite', {\n      email,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const rejectFriendRequest = async (invitationId: string) => {\n  try {\n    const res = await api.post('/api/invite-friend/reject', {\n      invitationId,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const acceptFriendRequest = async (invitationId: string) => {\n  try {\n    const res = await api.post('/api/invite-friend/accept', {\n      invitationId,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const createGroupChat = async (name: string) => {\n  try {\n    const res = await api.post('/api/group-chat', {\n      name,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const addMembersToGroup = async (\n  data: AddMembersToGroupArgs\n) => {\n  try {\n    const res = await api.post('/api/group-chat/add', {\n      friendIds: data.friendIds,\n      groupChatId: data.groupChatId,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const leaveGroup = async (data: LeaveGroupArgs) => {\n  try {\n    const res = await api.post('/api/group-chat/leave', {\n      groupChatId: data.groupChatId,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const removeFriend = async (data: RemoveFriendArgs) => {\n  try {\n    const res = await api.post('/api/invite-friend/remove', {\n      friendId: data.friendId,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const deleteGroup = async (data: DeleteGroupArgs) => {\n  try {\n    const res = await api.post('/api/group-chat/delete', {\n      groupChatId: data.groupChatId,\n    });\n\n    return res.data;\n  } catch (err: any) {\n    checkForAuthorization(err);\n    return {\n      error: true,\n      message: err.response.data,\n    };\n  }\n};\n\nexport const saveuserSubscription = async (\n  subscription: PushSubscription\n) => {\n  return api.post('/api/auth/subscribe', subscription);\n};\n\nexport const removeUserSubscription = (\n  subscription: PushSubscription\n) => {\n  return api.post('/api/auth/unsubscribe', subscription);\n};\n","import SimplePeer from \"simple-peer\";\n\nexport enum actionTypes {\n    authenticate,\n    logout,\n    authError,\n    authLoading,\n    showAlert,\n    hideAlert,\n    setFriends,\n    setPendingInvitations,\n    setOnlineUsers,\n    setGroupChatList,\n    resetFriends,\n    setChatType,\n    setChosenChatDetails,\n    setMessages,\n    addNewMessage,\n    resetChat,\n    setChosenGroupChatDetails,\n    setTyping,\n    setInitialTypingStatus,\n    setLocalStream,\n    setRemoteStream,\n    setOtherUserId,\n    setAudioOnly,\n    setScreenSharingStream,\n    setScreenSharing,\n    setCallRequest,\n    setCallStatus,\n    resetVideoChatState,\n    openRoom,\n    setRoomDetails,\n    setActiveRooms,\n    setLocalStreamRoom,\n    setRemoteStreams,\n    setAudioOnlyRoom,\n    setScreenSharingStreamRoom,\n    setIsUserJoinedWithAudioOnly,\n}\n\nexport interface CurrentUser {\n    _id: string;\n    email: string;\n    token: string;\n    username: string;\n}\n\ninterface AuthSuccessAction {\n    type: actionTypes.authenticate;\n    payload: {\n        _id: string;\n        email: string;\n        token: string;\n        username: string;\n    };\n}\n\ninterface AuthErrorAction {\n    type: actionTypes.authError;\n    payload: string;\n}\n\ninterface LogoutAction {\n    type: actionTypes.logout;\n}\n\ninterface AuthLoadingAction {\n    type: actionTypes.authLoading;\n    payload: boolean;\n}\n\ninterface ShowAlertAction {\n    type: actionTypes.showAlert;\n    payload: string;\n}\n\ninterface HideAlertAction {\n    type: actionTypes.hideAlert;\n}\n\nexport interface PendingInvitation {\n    _id: string;\n    senderId: {\n        username: string;\n        email: string;\n        _id: string;\n    };\n}\n\nexport interface Friend {\n    id: string;\n    username: string;\n    email: string;\n    isOnline?: boolean; // Optional property to indicate online status\n}\n\nexport interface OnlineUser {\n    userId: string;\n    socketId: string;\n}\n\nexport interface GroupChatDetails {\n    groupId: string;\n    groupName: string;\n    participants: Array<{\n        _id: string;\n        username: string;\n        email: string;\n    }>;\n    admin: {\n        _id: string;\n        username: string;\n        email: string;\n    };\n}\n\ninterface SetPendingInvitationAction {\n    type: actionTypes.setPendingInvitations;\n    payload: Array<PendingInvitation>;\n}\n\ninterface SetFriends {\n    type: actionTypes.setFriends;\n    payload: Array<Friend>;\n}\n\ninterface SetOnlineUsers {\n    type: actionTypes.setOnlineUsers;\n    payload: Array<OnlineUser>;\n}\n\nexport interface SetGroupChatList {\n    type: actionTypes.setGroupChatList;\n    payload: Array<GroupChatDetails>;\n}\n\nexport interface SetChosenChatDetails {\n    type: actionTypes.setChosenChatDetails;\n    payload: {\n        userId: string;\n        username: string;\n        isOnline?: boolean; // Optional property\n    };\n}\n\nexport interface SetChosenGroupChatDetails {\n    type: actionTypes.setChosenGroupChatDetails;\n    payload: GroupChatDetails;\n}\n\nexport interface ResetChat {\n    type: actionTypes.resetChat;\n}\n\nexport interface ResetFriends {\n    type: actionTypes.resetFriends;\n}\n\nexport interface Message {\n    _id: string;\n    content: string;\n    author: {\n        username: string;\n        _id: string;\n    };\n    createdAt: string;\n}\n\nexport interface Typing {\n    typing: boolean;\n    userId: string;\n}\n\nexport interface SetMessages {\n    type: actionTypes.setMessages;\n    payload: Array<Message>;\n}\n\nexport interface AddNewMessage {\n    type: actionTypes.addNewMessage;\n    payload: Message;\n}\n\nexport interface SetTyping {\n    type: actionTypes.setTyping;\n    payload: {\n        typing: boolean;\n        userId: string;\n    };\n}\n\nexport interface SetInitialTypingStatus {\n    type: actionTypes.setInitialTypingStatus;\n    payload: Array<Typing>;\n}\n\ninterface SetLocalStream {\n    type: actionTypes.setLocalStream;\n    payload: MediaStream | null;\n}\n\ninterface SetRemoteStream {\n    type: actionTypes.setRemoteStream;\n    payload: MediaStream | null;\n}\n\ninterface SetCallRequest {\n    type: actionTypes.setCallRequest;\n    payload: {\n        callerName: string;\n        audioOnly: boolean;\n        callerUserId: string;\n        signal: SimplePeer.SignalData;\n    };\n}\n\nexport type CallStatus = \"ringing\" | \"accepted\" | \"rejected\" | \"left\" | null;\n\nexport interface SetCallStatus {\n    type: actionTypes.setCallStatus;\n    payload: {\n        status: CallStatus;\n    };\n}\n\nexport interface ClearVideoChatState {\n    type: actionTypes.resetVideoChatState;\n}\n\ninterface SetOtherUserId {\n    type: actionTypes.setOtherUserId;\n    payload: {\n        otherUserId: string | null;\n    };\n}\n\ninterface SetScreenSharingStream {\n    type: actionTypes.setScreenSharingStream;\n    payload: {\n        stream: MediaStream | null;\n        isScreenSharing: boolean;\n    };\n}\n\ninterface SetAudioOnly {\n    type: actionTypes.setAudioOnly;\n    payload: {\n        audioOnly: boolean;\n    };\n}\n\nexport type ActiveRoom = {\n    roomCreator: {\n        userId: string;\n        username: string;\n        socketId: string;\n    };\n    participants: {\n        userId: string;\n        socketId: string;\n        username: string;\n    }[];\n    roomId: string;\n};\n\ninterface SetIsUserJoinedOnlyWithAudio {\n    type: actionTypes.setIsUserJoinedWithAudioOnly;\n    payload: {\n        isUserJoinedWithOnlyAudio: boolean;\n    };\n}\n\ninterface SetScreenSharingStreamRoom {\n    type: actionTypes.setScreenSharingStreamRoom;\n    payload: {\n        isScreenSharingActive: boolean;\n        screenSharingStream: MediaStream | null;\n    };\n}\n\ninterface SetRemoteStreams {\n    type: actionTypes.setRemoteStreams;\n    payload: {\n        remoteStreams: MediaStream[];\n    };\n}\n\ninterface SetAudioOnlyRoom {\n    type: actionTypes.setAudioOnlyRoom;\n    payload: {\n        audioOnly: boolean;\n    };\n}\n\ninterface SetLocalStreamRoom {\n    type: actionTypes.setLocalStreamRoom;\n    payload: {\n        localStreamRoom: MediaStream | null;\n    };\n}\n\ninterface SetActiveRooms {\n    type: actionTypes.setActiveRooms;\n    payload: {\n        activeRooms: ActiveRoom[];\n    };\n}\n\ninterface SetOpenRoom {\n    type: actionTypes.openRoom;\n    payload: {\n        isUserRoomCreator: boolean;\n        isUserInRoom: boolean;\n    };\n}\n\ninterface SetRoomDetails {\n    type: actionTypes.setRoomDetails;\n    payload: {\n        roomDetails: any;\n    };\n}\n\nexport type AuthActions =\n    | AuthSuccessAction\n    | AuthErrorAction\n    | LogoutAction\n    | AuthLoadingAction;\n\nexport type AlertActions = ShowAlertAction | HideAlertAction;\n\nexport type FriendsActions =\n    | SetPendingInvitationAction\n    | SetFriends\n    | SetOnlineUsers\n    | SetGroupChatList\n    | ResetFriends;\n\nexport type ChatActions =\n    | SetChosenChatDetails\n    | SetChosenGroupChatDetails\n    | SetMessages\n    | AddNewMessage\n    | SetTyping\n    | SetInitialTypingStatus\n    | ResetChat;\n\nexport type VideoChatActions =\n    | SetLocalStream\n    | SetRemoteStream\n    | SetCallRequest\n    | SetCallStatus\n    | ClearVideoChatState\n    | SetOtherUserId\n    | SetScreenSharingStream\n    | SetAudioOnly;\n\nexport type RoomActions =\n    | SetIsUserJoinedOnlyWithAudio\n    | SetActiveRooms\n    | SetAudioOnlyRoom\n    | SetLocalStreamRoom\n    | SetRemoteStreams\n    | SetOpenRoom\n    | SetRoomDetails\n    | SetScreenSharingStreamRoom;\n","import { actionTypes } from \"./types\"\n\nexport const showAlert = (message: string) => {\n    return {\n        type: actionTypes.showAlert,\n        payload: message\n    }\n}\n\n\nexport const hideAlert = () => {\n    return {\n        type: actionTypes.hideAlert\n    }\n}","import { \n    actionTypes, \n    SetChosenChatDetails, \n    SetMessages, \n    Message, \n    SetTyping, \n    AddNewMessage, \n    SetInitialTypingStatus, \n    Typing, \n    GroupChatDetails, \n    SetChosenGroupChatDetails, \n    ResetChat \n} from \"./types\";\n\n// Update setChosenChatDetails to include isOnline\nexport const setChosenChatDetails = (chatDetails: {\n    userId: string;\n    username: string;\n    isOnline?: boolean; // Make isOnline optional to match your friend structure\n}): SetChosenChatDetails => {\n    return {\n        type: actionTypes.setChosenChatDetails,\n        payload: chatDetails,\n    };\n};\n\nexport const setChosenGroupChatDetails = (chatDetails: GroupChatDetails): SetChosenGroupChatDetails => {\n    return {\n        type: actionTypes.setChosenGroupChatDetails,\n        payload: chatDetails,\n    };\n};\n\nexport const setMessages = (messages: Array<Message>): SetMessages => {\n    return {\n        type: actionTypes.setMessages,\n        payload: messages,\n    };\n};\n\nexport const addNewMessage = (message: Message): AddNewMessage => {\n    return {\n        type: actionTypes.addNewMessage,\n        payload: message,\n    };\n};\n\nexport const setTyping = (typing: Typing): SetTyping => {\n    return {\n        type: actionTypes.setTyping,\n        payload: typing\n    };\n};\n\nexport const setInitialTypingStatus = (typing: Array<Typing>): SetInitialTypingStatus => {\n    return {\n        type: actionTypes.setInitialTypingStatus,\n        payload: typing,\n    };\n};\n\nexport const resetChatAction = (): ResetChat => {\n    return {\n        type: actionTypes.resetChat\n    }\n};\n","import { Dispatch } from \"redux\";\nimport { acceptFriendRequest, inviteFriendRequest, rejectFriendRequest, removeFriend } from \"../api/api\";\nimport { showAlert } from \"./alertActions\";\nimport { resetChatAction } from \"./chatActions\";\nimport { actionTypes, PendingInvitation, Friend, OnlineUser, GroupChatDetails, ResetFriends } from \"./types\";\n\n\nexport const inviteFriend = (email: string, closeDialogHandler: () => void) => {\n    return async (dispatch: Dispatch) => {\n        const response = await inviteFriendRequest({ email });\n\n        if (response === \"Invitation has been sent successfully\") {\n            closeDialogHandler();\n            dispatch(showAlert(response));\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};\n\n\nexport const setPendingInvitations = (pendingInvitations: PendingInvitation[]) => {\n    return {\n        type: actionTypes.setPendingInvitations,\n        payload: pendingInvitations,\n    };\n}\n\n\n\nexport const setFriends = (\n    friends: Friend[]\n) => {\n    return {\n        type: actionTypes.setFriends,\n        payload: friends,\n    };\n};\n\n\nexport const setOnlineUsers = (\n    onlineUsers: OnlineUser[]\n) => {\n    return {\n        type: actionTypes.setOnlineUsers,\n        payload: onlineUsers,\n    };\n};\n\n\nexport const setGroupChatList = (chatList: GroupChatDetails[]) => {\n    return {\n        type: actionTypes.setGroupChatList,\n        payload: chatList,\n    };\n};\n\n\nexport const rejectInvitation = (invitationId: string) => {\n    return async (dispatch: Dispatch) => {\n        const response = await rejectFriendRequest(invitationId);\n\n        if (response === \"Invitation rejected successfully!\") {;\n            dispatch(showAlert(response));\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};\n\n\nexport const acceptInvitation = (invitationId: string) => {\n    return async (dispatch: Dispatch) => {\n        const response = await acceptFriendRequest(invitationId);\n\n        if (response === \"Invitation accepted successfully!\") {\n            dispatch(showAlert(response));\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};\n\nexport const removeFriendAction = ({friendId, friendName}: { friendId: string; friendName: string }) => {\n    return async (dispatch: Dispatch) => {\n        const response = await removeFriend({\n            friendId,\n        });\n\n        if (response === \"Friend removed successfully!\") {\n            dispatch(showAlert(`You removed ${friendName} from your list of friends!`));\n            dispatch(resetChatAction())\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};\n\n\nexport const resetFriendsAction = (): ResetFriends => {\n    return {\n        type: actionTypes.resetFriends,\n    };\n};","import {\n  saveuserSubscription,\n  removeUserSubscription,\n} from './api/api';\n\nconst convertedVapidKey = urlBase64ToUint8Array(\n  process.env.REACT_APP_VAPID_PUBLIC_KEY || ''\n);\n\nexport function askPermission() {\n  return new Promise(function (resolve, reject) {\n    const permissionResult = Notification.requestPermission(function (\n      result\n    ) {\n      resolve(result);\n    });\n    if (permissionResult) {\n      permissionResult.then(resolve, reject);\n    }\n  }).then((result) => {\n    if (result !== 'granted') {\n      alert(\n        \"Can't turn on the notifications. First enable notifications from the browser settings and then try again!\"\n      );\n      return false;\n    }\n    return true;\n  });\n}\n\nexport function subscribeUserToPush(callback: () => void) {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(function (registration) {\n      if (!registration.pushManager) {\n        console.warn('Push manager unavailable.');\n        return;\n      }\n\n      registration.pushManager\n        .getSubscription()\n        .then(function (existingSubscription) {\n          if (existingSubscription === null) {\n            console.info(\n              'No push subscription detected. Making one..'\n            );\n            const subscribeOptions = {\n              userVisibleOnly: true,\n              applicationServerKey: convertedVapidKey,\n            };\n            registration.pushManager\n              .subscribe(subscribeOptions)\n              .then(function (newSubscription) {\n                console.log('New push subscription added.');\n                return saveuserSubscription(newSubscription).then(\n                  () => {\n                    callback();\n                  }\n                );\n              })\n              .catch(function (e) {\n                if (Notification.permission !== 'granted') {\n                  console.info('Permission was not granted.');\n                } else {\n                  console.error(\n                    'An error ocurred during the subscription process.',\n                    e\n                  );\n                }\n              });\n          } else {\n            console.info('Existing subscription detected.');\n            return saveuserSubscription(existingSubscription).then(\n              () => {\n                callback();\n              }\n            );\n          }\n        });\n    });\n  }\n}\n\nexport function unsubscribeUserToPush(callback: () => void) {\n  navigator.serviceWorker.ready.then(function (registration) {\n    registration.pushManager\n      .getSubscription()\n      .then(function (subscription) {\n        if (subscription) {\n          return removeUserSubscription(subscription).then(() => {\n            console.info('User is unsubscribed.');\n            callback();\n            return subscription.unsubscribe();\n          });\n        }\n      })\n      .catch(function (error) {\n        console.error('Error unsubscribing', error);\n      })\n      .then(function () {\n        console.info('User is unsubscribed!!!');\n        callback();\n        alert(\n          'Now turn off the notifications from the site settings to stop receiving notifications!'\n        );\n      });\n  });\n}\n\nfunction urlBase64ToUint8Array(base64String: string) {\n  const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n  // eslint-disable-next-line\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n","import { Dispatch,  } from \"redux\";\nimport { login, register, getMe } from \"../api/api\";\nimport { LoginArgs, RegisterArgs } from \"../api/types\";\nimport { showAlert } from \"./alertActions\";\nimport { resetChatAction } from \"./chatActions\";\nimport { resetFriendsAction } from \"./friendActions\";\nimport {actionTypes, CurrentUser} from \"./types\";\nimport { unsubscribeUserToPush } from \"../notifications\";\n\n\nexport const loginUser = (credentials: LoginArgs) => {\n    return async (dispatch: Dispatch) => {\n        const response = await login(credentials);\n\n        if (\"error\" in response) {\n            dispatch({\n                type: actionTypes.authError,\n                payload: response.message\n            })\n\n            dispatch(showAlert(response.message));\n        } else {\n            localStorage.setItem(\"currentUser\", JSON.stringify(response.userDetails));\n            dispatch({\n                type: actionTypes.authenticate,\n                payload: response.userDetails\n            })\n\n          dispatch(\n              showAlert(\n                `Hi, ${response.userDetails.username} . Welcome back.`\n              )\n          );\n        }\n    }\n}\n\n\n\nexport const registerUser = (credentials: RegisterArgs) => {\n    return async (dispatch: Dispatch) => {\n        const response = await register(credentials);\n\n        if (\"error\" in response) {\n            dispatch({\n                type: actionTypes.authError,\n                payload: response.message,\n            });\n\n            dispatch(showAlert(response.message));\n        } else {\n            localStorage.setItem(\n                \"currentUser\",\n                JSON.stringify(response.userDetails)\n            );\n            dispatch({\n                type: actionTypes.authenticate,\n                payload: response.userDetails,\n            });\n\n            dispatch(\n                showAlert(\n                    `Hi  ${response.userDetails.username}. Welcome to Sirunchat. the secured platform for you and your friends.`\n                )\n            );\n        }\n    };\n};\n\n\nexport const autoLogin = () => {\n    return async (dispatch: Dispatch) => {\n\n        dispatch({\n            type: actionTypes.authLoading,\n            payload: true,\n        });\n\n        const currentUser: CurrentUser = JSON.parse(\n            localStorage.getItem(\"currentUser\") || \"{}\"\n        );\n\n        const response = await getMe();\n\n        // token has expired\n        if (response.statusCode === 401 || response.statusCode === 403) {\n            localStorage.clear();\n            dispatch({\n                type: actionTypes.authLoading,\n                payload: false,\n            });\n\n        } else {\n\n            if (currentUser.token) {\n                dispatch({\n                    type: actionTypes.authenticate,\n                    payload: {\n                        ...response.me,\n                        token: currentUser.token,\n                    },\n                });\n            }\n\n        }\n\n    }\n}\n\n\nexport const logoutUser = () => {\n  return async (dispatch: Dispatch) => {\n\n        unsubscribeUserToPush(() => {\n          localStorage.removeItem('currentUser');\n        });\n\n        dispatch({\n            type: actionTypes.logout,\n        });\n\n        dispatch(resetChatAction());\n        dispatch(resetFriendsAction());\n\n        dispatch({\n            type: actionTypes.resetChat\n        })\n    }\n}","import { Reducer } from \"redux\";\nimport { AuthActions, actionTypes } from \"../actions/types\";\n\ninterface AuthState {\n    userDetails: {\n        _id: string;\n        email: string;\n        token: string;\n        username: string;\n    } | null;\n    error: boolean;\n    errorMessage: string;\n    loading: boolean;\n}\n\nconst initialState: AuthState = {\n    userDetails: null,\n    error: false,\n    errorMessage: \"\",\n    loading: false,\n};\n\nconst authReducer: Reducer<AuthState, AuthActions> = (\n    state = initialState,\n    action\n) => {\n    switch (action.type) {\n        case actionTypes.authenticate:\n            return {\n                error: false,\n                errorMessage: \"\",\n                userDetails: action.payload,\n                loading: false,\n            };\n\n        case actionTypes.authError:\n            return {\n                ...state,\n                error: true,\n                errorMessage: action.payload,\n                loading: false,\n            };\n\n        case actionTypes.logout:\n            return {\n                error: false,\n                errorMessage: \"\",\n                userDetails: null,\n                loading: false,\n            };\n        case actionTypes.authLoading:\n            return {\n                error: false,\n                errorMessage: \"\",\n                userDetails: null,\n                loading: action.payload,\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport { authReducer };\n","import { AlertActions, actionTypes } from \"../actions/types\";\n\nconst initialState = {\n    open: false,\n    message: \"\"\n}\n\n\ninterface AlertState {\n    open: boolean;\n    message: string;\n}\n\n\nexport const alertReducer = (state=initialState, action: AlertActions): AlertState => {\n    switch (action.type) {\n        case actionTypes.showAlert:\n            return {\n                open: true,\n                message: action.payload\n            }\n        \n        case actionTypes.hideAlert:\n            return {\n                open: false,\n                message: \"\"\n            }\n        \n        default:\n            return state;\n    }\n}","import { Reducer } from \"redux\";\nimport { FriendsActions, actionTypes, PendingInvitation, Friend, OnlineUser, GroupChatDetails } from \"../actions/types\";\n\n\nconst initialState = {\n    friends: [],\n    pendingInvitations: [],\n    onlineUsers: [],\n    groupChatList: []\n};\n\ninterface FriendsState {\n    friends: Array<Friend>;\n    pendingInvitations: Array<PendingInvitation>;\n    onlineUsers: Array<OnlineUser>;\n    groupChatList: Array<GroupChatDetails>;\n}\n\n\nconst friendsReducer: Reducer<FriendsState, FriendsActions> = (\n    state = initialState,\n    action\n) => {\n    switch (action.type) {\n        case actionTypes.setPendingInvitations:\n            return {\n                ...state,\n                pendingInvitations: action.payload,\n            };\n\n        case actionTypes.setFriends:\n            return {\n                ...state,\n                friends: action.payload,\n            };\n\n        case actionTypes.setOnlineUsers:\n            return {\n                ...state,\n                onlineUsers: action.payload,\n            };\n\n        case actionTypes.setGroupChatList:\n            return {\n                ...state,\n                groupChatList: action.payload,\n            };\n\n        case actionTypes.resetFriends:\n            return {\n                ...initialState\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport { friendsReducer };\n","import { Reducer } from \"redux\";\nimport { ChatActions, actionTypes } from \"../actions/types\";\n\nenum ChatTypes {\n    direct = \"DIRECT\",\n    group = \"GROUP\",\n}\n\ninterface Message {\n    _id: string;\n    content: string;\n    author: {\n        username: string;\n        _id: string;\n    };\n    createdAt: string;\n}\n\ninterface ChatState {\n    chatType: ChatTypes;\n    chosenChatDetails: {\n        userId: string;\n        username: string;\n        isOnline?: boolean; // Added isOnline as optional\n    } | null;\n    chosenGroupChatDetails: {\n        groupId: string;\n        groupName: string;\n        participants: Array<{\n            _id: string;\n            username: string;\n            email: string;\n        }>;\n        admin: {\n            _id: string;\n            username: string;\n            email: string;\n        };\n    } | null;\n    typing: Array<{\n        userId: string;\n        typing: boolean;\n    }>;\n    messages: Array<Message>;\n}\n\nconst initialState: ChatState = {\n    chosenChatDetails: null,\n    chosenGroupChatDetails: null,\n    typing: [],\n    chatType: ChatTypes.direct,\n    messages: [],\n};\n\nconst chatReducer: Reducer<ChatState, ChatActions> = (\n    state = initialState,\n    action\n) => {\n    switch (action.type) {\n        case actionTypes.setChosenChatDetails:\n            return {\n                ...state,\n                chosenGroupChatDetails: null,\n                messages: [],\n                chosenChatDetails: {\n                    userId: action.payload.userId,\n                    username: action.payload.username,\n                    isOnline: action.payload.isOnline ?? false, // Set isOnline, default to false if undefined\n                },\n            };\n\n        case actionTypes.setChosenGroupChatDetails:\n            return {\n                ...state,\n                chosenChatDetails: null,\n                messages: [],\n                chosenGroupChatDetails: action.payload,\n            };\n\n        case actionTypes.setMessages:\n            return {\n                ...state,\n                messages: action.payload,\n            };\n\n        case actionTypes.addNewMessage:\n            return {\n                ...state,\n                messages: [...state.messages, action.payload],\n            };\n\n        case actionTypes.setInitialTypingStatus:\n            return {\n                ...state,\n                typing: action.payload,\n            };\n\n        case actionTypes.setTyping:\n            return {\n                ...state,\n                typing: state.typing.map((item) =>\n                    item.userId === action.payload.userId ? action.payload : item\n                ),\n            };\n\n        case actionTypes.resetChat:\n            return {\n                ...state,\n                chosenChatDetails: null,\n                chosenGroupChatDetails: null,\n                messages: [],\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport { chatReducer };\n","import { Reducer } from \"redux\";\nimport SimplePeer from \"simple-peer\";\nimport { VideoChatActions, actionTypes } from \"../actions/types\";\n\n\n\nexport interface VideoChatState {\n    localStream: MediaStream | null;\n    remoteStream: MediaStream | null;\n    otherUserId: string | null;\n    audioOnly: boolean;\n    screenSharingStream: MediaStream | null; \n    screenSharing: boolean;\n\n    // what caller will see\n    callStatus: \"ringing\" | \"accepted\" | \"rejected\" | \"left\" | null;\n\n    // what receiver will see\n    callRequest: {\n        callerName: string;\n        audioOnly: boolean;\n        callerUserId: string;\n        signal: SimplePeer.SignalData;\n    } | null;\n}\n\nconst initialState: VideoChatState = {\n    localStream: null,\n    remoteStream: null,\n    otherUserId: null, // id of the other user in the call\n    audioOnly: false,\n    screenSharingStream: null,\n    screenSharing: false,\n    callRequest: null,\n    callStatus: null,\n};\n\nconst videoChatReducer: Reducer<VideoChatState, VideoChatActions> = (\n    state = initialState,\n    action\n) => {\n    switch (action.type) {\n        case actionTypes.setLocalStream:\n            return {\n                ...state,\n                localStream: action.payload,\n            };\n\n        case actionTypes.setRemoteStream:\n            return {\n                ...state,\n                remoteStream: action.payload,\n            };\n\n        case actionTypes.setCallRequest:\n            return {\n                ...state,\n                callRequest: action.payload,\n            };\n\n        case actionTypes.setCallStatus:\n            return {\n                ...state,\n                callStatus: action.payload.status,\n            };\n\n        case actionTypes.setOtherUserId:\n            return {\n                ...state,\n                otherUserId: action.payload.otherUserId,\n        };\n\n        case actionTypes.resetVideoChatState:\n            return initialState;\n\n        case actionTypes.setScreenSharingStream:\n            return {\n                ...state,\n                screenSharingStream: action.payload.stream,\n                screenSharing: action.payload.isScreenSharing\n            };\n\n        case actionTypes.setAudioOnly:\n            return {\n                ...state,\n                audioOnly: action.payload.audioOnly,\n            };\n        \n        default:\n            return state;\n    }\n};\n\nexport default videoChatReducer;\n","import { Reducer } from \"redux\";\nimport { actionTypes, RoomActions, ActiveRoom } from \"../actions/types\";\n\n\nexport interface RoomState {\n    isUserInRoom: boolean;\n    isUserRoomCreator: boolean;\n    roomDetails: ActiveRoom | null;\n    activeRooms: ActiveRoom[];\n    localStreamRoom: MediaStream | null;\n    remoteStreams: MediaStream[];\n    audioOnly: boolean;\n    screenSharingStream: MediaStream | null ;\n    isScreenSharingActive: boolean;\n    isUserJoinedWithOnlyAudio: boolean;\n}\n\nconst initState = {\n    isUserInRoom: false,\n    isUserRoomCreator: false,\n    roomDetails: null,\n    activeRooms: [],\n    localStreamRoom: null,\n    remoteStreams: [],\n    audioOnly: false,\n    screenSharingStream: null,\n    isScreenSharingActive: false,\n    isUserJoinedWithOnlyAudio: false,\n};\n\nexport const roomReducer: Reducer<RoomState, RoomActions> = (\n    state = initState,\n    action\n) => {\n    switch (action.type) {\n        case actionTypes.openRoom:\n            return {\n                ...state,\n                isUserInRoom: action.payload.isUserInRoom,\n                isUserRoomCreator: action.payload.isUserRoomCreator,\n            };\n        case actionTypes.setRoomDetails:\n            return {\n                ...state,\n                roomDetails: action.payload.roomDetails,\n            };\n        case actionTypes.setActiveRooms:\n            return {\n                ...state,\n                activeRooms: action.payload.activeRooms,\n            };\n        case actionTypes.setLocalStreamRoom:\n            return {\n                ...state,\n                localStreamRoom: action.payload.localStreamRoom,\n            };\n        case actionTypes.setAudioOnlyRoom:\n            return {\n                ...state,\n                audioOnly: action.payload.audioOnly,\n            };\n        case actionTypes.setRemoteStreams:\n            console.log(action.payload.remoteStreams)\n            return {\n                ...state,\n                remoteStreams: action.payload.remoteStreams,\n            };\n        case actionTypes.setScreenSharingStreamRoom:\n            return {\n                ...state,\n                screenSharingStream: action.payload.screenSharingStream,\n                isScreenSharingActive: action.payload.isScreenSharingActive,\n            };\n        case actionTypes.setIsUserJoinedWithAudioOnly:\n            return {\n                ...state,\n                isUserJoinedWithOnlyAudio:\n                    action.payload.isUserJoinedWithOnlyAudio,\n            };\n        default:\n            return state;\n    }\n};\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { authReducer } from \"../reducers/authReducer\";\nimport { alertReducer } from \"../reducers/alertReducer\";\nimport { friendsReducer } from \"../reducers/friendsReducer\";\nimport { chatReducer } from \"../reducers/chatReducer\";\nimport videoChatReducer from \"../reducers/videoChatReducer\";\nimport { roomReducer } from \"../reducers/roomReducer\";\n\nconst rootReducer = combineReducers({\n    auth: authReducer,\n    alert: alertReducer,\n    friends: friendsReducer,\n    chat: chatReducer,\n    videoChat: videoChatReducer,\n    room: roomReducer,\n});\n\nconst store = createStore(\n    rootReducer,\n    composeWithDevTools(applyMiddleware(thunk))\n);\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof rootReducer>;\n\ntype AppDispatch = typeof store.dispatch;\n\n// Create a typed useDispatch hook\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n\nconst useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\nexport { store, useAppSelector }; // Exporting all necessary hooks\n","import { Dispatch } from \"redux\";\nimport { ThunkAction } from \"redux-thunk\";\nimport SimplePeer from \"simple-peer\";\nimport { actionTypes, CallStatus, ClearVideoChatState } from \"./types\"; // Ensure this is correct\nimport { showAlert } from \"./alertActions\";\nimport { RootState } from \"../store\";\nimport { currentPeerConnection, setCurrentPeerConnection } from \"../socket/socketConnection\";\n\nexport const setLocalStream = (stream: MediaStream | null) => {\n    return {\n        type: actionTypes.setLocalStream,\n        payload: stream,\n    };\n};\n\nexport const setRemoteStream = (stream: MediaStream | null) => {\n    return {\n        type: actionTypes.setRemoteStream,\n        payload: stream,\n    };\n};\n\nexport const setCallStatus = (status: CallStatus) => {\n    return {\n        type: actionTypes.setCallStatus,\n        payload: {\n            status,\n        },\n    };\n};\n\nexport const setCallRequest = (\n    callRequest: {\n        callerName: string;\n        audioOnly: boolean;\n        callerUserId: string;\n        signal: SimplePeer.SignalData;\n    } | null\n) => {\n    return (dispatch: Dispatch) => {\n        dispatch({\n            type: actionTypes.setCallRequest,\n            payload: callRequest,\n        });\n\n        if (callRequest?.callerUserId) {\n            dispatch({\n                type: actionTypes.setOtherUserId,\n                payload: {\n                    otherUserId: callRequest.callerUserId,\n                },\n            });\n        }\n    };\n};\n\nexport const clearVideoChat = (\n    message: string\n): ThunkAction<void, RootState, unknown, ClearVideoChatState> => {\n    return (dispatch, getState) => {\n        const {\n            videoChat: { localStream, screenSharingStream },\n        } = getState();\n\n        localStream?.getTracks().forEach((track) => track.stop());\n        screenSharingStream?.getTracks().forEach((track) => track.stop());\n\n        // Uncomment if you want to destroy the peer connection\n        // if (currentPeerConnection) {\n        //     currentPeerConnection.destroy();\n        //     console.log(\"DESTROYED PEER CONNECTION\");\n        // }\n\n        // setCurrentPeerConnection(null);\n\n        dispatch({\n            type: actionTypes.resetVideoChatState,\n        });\n\n        dispatch(showAlert(message) as any);\n    };\n};\n\nexport const setOtherUserId = (otherUserId: string) => {\n    return {\n        type: actionTypes.setOtherUserId,\n        payload: {\n            otherUserId,\n        },\n    };\n};\n\nexport const setScreenSharingStream = (stream: MediaStream | null) => {\n    return {\n        type: actionTypes.setScreenSharingStream,\n        payload: {\n            stream,\n            isScreenSharing: !!stream,\n        },\n    };\n};\n\nexport const setAudioOnly = (audioOnly: boolean) => {\n    return {\n        type: actionTypes.setAudioOnly,\n        payload: {\n            audioOnly,\n        },\n    };\n};\n","import { actionTypes, ActiveRoom } from \"./types\";\n\nexport const setOpenRoom = (\n    isUserRoomCreator = false,\n    isUserInRoom = false\n) => {\n    return {\n        type: actionTypes.openRoom,\n        payload: {\n            isUserRoomCreator,\n            isUserInRoom,\n        },\n    };\n};\n\n// export const getActions = (dispatch) => {\n//     return {\n//         setAudioOnly: (audioOnly) => dispatch(setAudioOnly(audioOnly)),\n//         setScreenSharingStream: (stream) => {\n//             dispatch(setScreenSharingStream(stream));\n//         },\n//     };\n// };\n\nexport const setRoomDetails = (roomDetails: ActiveRoom | null) => {\n    return {\n        type: actionTypes.setRoomDetails,\n        payload: {\n            roomDetails,\n        }\n    };\n};\n\nexport const setActiveRooms = (activeRooms: ActiveRoom[]) => {\n    return {\n        type: actionTypes.setActiveRooms,\n        payload: {\n            activeRooms,\n        },\n    };\n};\n\nexport const setLocalStreamRoom = (localStreamRoom: MediaStream | null) => {\n    return {\n        type: actionTypes.setLocalStreamRoom,\n        payload: {\n            localStreamRoom,\n        },\n    };\n};\n\nexport const setAudioOnlyRoom = (audioOnly: boolean) => {\n    return {\n        type: actionTypes.setAudioOnlyRoom,\n        payload: {\n            audioOnly,\n        },\n    };\n};\n\nexport const setRemoteStreams = (remoteStreams: Array<MediaStream>) => {\n    return {\n        type: actionTypes.setRemoteStreams,\n        payload: {\n            remoteStreams,\n        },\n    };\n};\n\nexport const setScreenSharingStreamRoom = (stream: MediaStream | null) => {\n    return {\n        type: actionTypes.setScreenSharingStreamRoom,\n        payload: {\n            isScreenSharingActive: stream ? true : false,\n            screenSharingStream: stream || null,\n        },\n    };\n};\n\nexport const setIsUserJoinedOnlyWithAudio = (onlyWithAudio: boolean) => {\n    return {\n        type: actionTypes.setIsUserJoinedWithAudioOnly,\n        payload: {\n            isUserJoinedWithOnlyAudio: onlyWithAudio,\n        },\n    };\n};\n","import Peer from \"simple-peer\";\nimport { setLocalStreamRoom, setRemoteStreams } from \"../actions/roomActions\";\nimport { setLocalStream } from \"../actions/videoChatActions\";\nimport { store } from \"../store\";\nimport { signalPeerData } from \"./socketConnection\";\n\n\nexport const getLocalStreamPreview = (audioOnly: boolean, callback?: () => void, room?: boolean) => {\n    \n    const constraints = { audio: true, video: audioOnly ? false : true };\n\n    navigator.mediaDevices.getUserMedia(constraints).then((stream) => {\n\n\n        if(room) {\n            store.dispatch(setLocalStreamRoom(stream) as any);\n        } else {\n            store.dispatch(setLocalStream(stream) as any);\n        }\n\n        if (callback) {\n            callback();\n        }\n        \n    }).catch((err) => {\n        console.log(err);\n        console.log(\"Error getting local stream\");\n    })\n}\n\n\nconst peerConfiguration = () => {\n    const turnIceServers = null;\n\n    if (turnIceServers) {\n        // TODO use TURN server credentials\n    } else {\n        console.warn(\"Using only STUN server\");\n        return {\n            iceServers: [\n                {\n                    urls: \"stun:stun.l.google.com:19302\",\n                },\n            ],\n        };\n    }\n};\n\n\nexport const newPeerConnection = (initiator: boolean) => {\n    \n    const stream = store.getState().videoChat.localStream\n\n    if (!stream) {\n        throw new Error(\"No local stream\");\n\n    }\n    \n    console.log(\"from web \", stream);\n    \n    const configuration = peerConfiguration();\n    const peer = new Peer({\n        initiator: initiator,\n        trickle: false,\n        config: configuration,\n        stream: stream,\n    });\n\n    \n    \n    return peer;\n}\n\n\nlet peers: any = {};\n\nexport const prepareNewPeerConnection = (connUserSocketId: string, isInitiator: boolean) => {\n    // connUserSocketId; -> who has joined the room\n    const localStream = store.getState().room.localStreamRoom;\n\n    if (isInitiator) {\n        console.log(\"preparing new peer connection as initiator\");\n    } else {\n        console.log(\"preparing new peer connection as not initiator\");\n    }\n\n    // if(!localStream) {\n    //     return\n    // }\n\n    console.log(\"localStream\", localStream)\n\n    console.log(\"hello\")\n\n    peers[connUserSocketId] = new Peer({\n        initiator: isInitiator,\n        config: peerConfiguration(),\n        stream: localStream!,\n    });\n\n    peers[connUserSocketId].on(\"signal\", (data: Peer.SignalData) => {\n        const signalData = {\n            signal: data,\n            connUserSocketId: connUserSocketId,\n        };\n\n        signalPeerData(signalData);\n    });\n\n    peers[connUserSocketId].on(\"stream\", (remoteStream: any) => {\n        // TODO\n        // add new remote stream (of connUserSocketId who has joined the room) to our server store\n        console.log(\"remote stream came from other user\");\n        console.log(\"direct connection has been established\");\n        remoteStream.connUserSocketId = connUserSocketId;\n        addNewRemoteStream(remoteStream);\n    });\n};\n\nexport const handleSignalingData = (data: {\n    connUserSocketId: string;\n    signal: Peer.SignalData;\n}) => {\n    const { connUserSocketId, signal } = data;\n\n    if (peers[connUserSocketId]) {\n        peers[connUserSocketId].signal(signal);\n    }\n};\n\nconst addNewRemoteStream = (remoteStream: MediaStream) => {\n    console.log(\"Hi\")\n    const remoteStreams = store.getState().room.remoteStreams;\n    const newRemoteStreams = [...remoteStreams, remoteStream];\n\n    store.dispatch(setRemoteStreams(newRemoteStreams) as any);\n};\n\nexport const closeAllConnections = () => {\n    Object.entries(peers).forEach((mappedObject) => {\n        const connUserSocketId = mappedObject[0];\n        if (peers[connUserSocketId]) {\n            peers[connUserSocketId].destroy();\n            delete peers[connUserSocketId];\n        }\n    });\n};\n\nexport const handleParticipantLeftRoom = (data: { connUserSocketId: string }) => {\n    const { connUserSocketId } = data;\n\n    if (peers[connUserSocketId]) {\n        peers[connUserSocketId].destroy();\n        delete peers[connUserSocketId];\n    }\n\n    const remoteStreams = store.getState().room.remoteStreams;\n\n    const newRemoteStreams = remoteStreams.filter(\n        (remoteStream) =>\n            (remoteStream as any).connUserSocketId !== connUserSocketId\n    );\n\n    store.dispatch(setRemoteStreams(newRemoteStreams) as any);\n};\n\nexport const switchOutgoingTracks = (stream: MediaStream) => {\n    for (let socket_id in peers) {\n        for (let index in peers[socket_id].streams[0].getTracks()) {\n            for (let index2 in stream.getTracks()) {\n                if (\n                    peers[socket_id].streams[0].getTracks()[index].kind ===\n                    stream.getTracks()[index2].kind\n                ) {\n                    peers[socket_id].replaceTrack(\n                        peers[socket_id].streams[0].getTracks()[index],\n                        stream.getTracks()[index2],\n                        peers[socket_id].streams[0]\n                    );\n                    break;\n                }\n            }\n        }\n    }\n};\n","import {\n    setOpenRoom,\n    setRoomDetails,\n    setActiveRooms,\n    setLocalStreamRoom,\n    setRemoteStreams,\n    setScreenSharingStreamRoom,\n    setIsUserJoinedOnlyWithAudio,\n} from \"../actions/roomActions\";\nimport { ActiveRoom } from \"../actions/types\";\nimport { store } from \"../store\";\nimport * as socketConnection from \"./socketConnection\";\nimport { closeAllConnections, getLocalStreamPreview } from \"./webRTC\";\n\nexport const createNewRoom = () => {\n    const successCallbackFunc = () => {\n        store.dispatch(setOpenRoom(true, true) as any);\n\n        const audioOnly = store.getState().room.audioOnly;\n        store.dispatch(setIsUserJoinedOnlyWithAudio(audioOnly) as any);\n        socketConnection.createNewRoom();\n    };\n\n    const audioOnly = store.getState().room.audioOnly;\n    getLocalStreamPreview(audioOnly, successCallbackFunc, true);\n};\n\nexport const newRoomCreated = (data: { roomDetails: ActiveRoom }) => {\n    const { roomDetails } = data;\n    store.dispatch(setRoomDetails(roomDetails) as any);\n};\n\nexport const updateActiveRooms = (data: { activeRooms: ActiveRoom[] }) => {\n    const { activeRooms } = data;\n    console.log(\"Active ROOMS\", activeRooms);\n\n    const {\n        friends: { friends },\n        auth: { userDetails },\n        room: { roomDetails },\n    } = store.getState();\n    const rooms: ActiveRoom[] = [];\n\n    const userId = userDetails?._id;\n\n    activeRooms.forEach((room: ActiveRoom) => {\n        const isRoomCreatedByMe = room.roomCreator.userId === userId;\n\n        if (isRoomCreatedByMe) {\n            rooms.push(room);\n        } else {\n            friends.forEach((f) => {\n                if (f.id === room.roomCreator.userId) {\n                    rooms.push(room);\n                }\n            });\n        }\n\n        if(room.roomId === roomDetails?.roomId) {\n            store.dispatch(setRoomDetails(room) as any);\n        }\n        \n    });\n\n    store.dispatch(setActiveRooms(rooms) as any);\n};\n\nexport const initialRoomsUpdate = (data: { activeRooms: ActiveRoom[] }) => {\n    const { activeRooms } = data;\n\n    store.dispatch(setActiveRooms(activeRooms) as any);\n};\n\nexport const joinRoom = (room: ActiveRoom) => {\n    const successCallbackFunc = () => {\n        store.dispatch(setRoomDetails(room) as any);\n        store.dispatch(setOpenRoom(false, true) as any);\n        const audioOnly = store.getState().room.audioOnly;\n        store.dispatch(setIsUserJoinedOnlyWithAudio(audioOnly) as any);\n        socketConnection.joinRoom({ roomId: room.roomId });\n    };\n\n    const audioOnly = store.getState().room.audioOnly;\n    getLocalStreamPreview(audioOnly, successCallbackFunc, true);\n};\n\nexport const leaveRoom = () => {\n    const roomId = store.getState().room.roomDetails?.roomId;\n\n    const localStream = store.getState().room.localStreamRoom;\n    if (localStream) {\n        localStream.getTracks().forEach((track) => track.stop());\n        store.dispatch(setLocalStreamRoom(null) as any);\n    }\n\n    const screenSharingStream = store.getState().room.screenSharingStream;\n    if (screenSharingStream) {\n        screenSharingStream.getTracks().forEach((track) => track.stop());\n        store.dispatch(setScreenSharingStreamRoom(null) as any);\n    }\n\n    store.dispatch(setRemoteStreams([]) as any);\n    closeAllConnections();\n\n    if (roomId) {\n        socketConnection.leaveRoom({ roomId });\n    }\n    store.dispatch(setRoomDetails(null) as any);\n    store.dispatch(setOpenRoom(false, false) as any);\n};\n","import { io, Socket } from 'socket.io-client';\nimport {\n  setFriends,\n  setGroupChatList,\n  setOnlineUsers,\n  setPendingInvitations,\n} from '../actions/friendActions';\nimport {\n  addNewMessage,\n  setInitialTypingStatus,\n  setMessages,\n  setTyping,\n} from '../actions/chatActions';\nimport { ActiveRoom, Message } from '../actions/types';\nimport { store } from '../store';\nimport {\n  setCallRequest,\n  setCallStatus,\n  setOtherUserId,\n  setRemoteStream,\n  clearVideoChat,\n  setAudioOnly,\n} from '../actions/videoChatActions';\nimport {\n  getLocalStreamPreview,\n  handleParticipantLeftRoom,\n  handleSignalingData,\n  newPeerConnection,\n  prepareNewPeerConnection,\n} from './webRTC';\nimport SimplePeer from 'simple-peer';\nimport {\n  initialRoomsUpdate,\n  newRoomCreated,\n  updateActiveRooms,\n} from './roomHandler';\n\nexport interface UserDetails {\n  email: string;\n  token: string;\n  username: string;\n}\n\ninterface PendingInvitation {\n  _id: string;\n  senderId: {\n    username: string;\n    email: string;\n    _id: string;\n  };\n}\n\ninterface Friend {\n  id: string;\n  username: string;\n  email: string;\n}\n\ninterface OnlineUser {\n  userId: string;\n  socketId: string;\n}\n\ninterface GroupChatDetails {\n  groupId: string;\n  groupName: string;\n  participants: Array<{\n    _id: string;\n    username: string;\n    email: string;\n  }>;\n  admin: {\n    _id: string;\n    username: string;\n    email: string;\n  };\n}\n\ninterface ServerToClientEvents {\n  'friend-invitations': (data: Array<PendingInvitation>) => void;\n  'friends-list': (data: Array<Friend>) => void;\n  'conn-init': (data: { connUserSocketId: string }) => void; // Add this line\n  'online-users': (data: Array<OnlineUser>) => void;\n  'delete-chat-success': (data: { message: string }) => void;\n  'delete-chat-failed': (data: { message: string }) => void;\n  'upload-file': (data: { file: File; receiverUserId: string }) => void;\n\n  'groupChats-list': (data: Array<GroupChatDetails>) => void;\n\n  'direct-message': (data: {\n    newMessage: Message;\n    participants: Array<string>;\n  }) => void;\n\n  'group-message': (data: {\n    newMessage: Message;\n    groupChatId: string;\n  }) => void;\n\n  'direct-chat-history': (data: {\n    messages: Array<Message>;\n    participants: Array<string>;\n  }) => void;\n\n  'group-chat-history': (data: {\n    messages: Array<Message>;\n    groupChatId: string;\n  }) => void;\n\n  'notify-typing': (data: {\n    senderUserId: string;\n    typing: boolean;\n  }) => void;\n\n  'call-request': (data: {\n    callerName: string;\n    audioOnly: boolean;\n    callerUserId: string;\n    signal: SimplePeer.SignalData;\n  }) => void;\n\n  'call-response': (data: {\n    otherUserId: string; // the user who is being called (who accepted or rejected the call)\n    accepted: boolean;\n    signal: SimplePeer.SignalData;\n  }) => void;\n\n  'notify-chat-left': () => void;\n\n  'room-create': (data: { roomDetails: ActiveRoom }) => void;\n\n  'active-rooms': (data: { activeRooms: ActiveRoom[] }) => void;\n\n  'active-rooms-initial': (data: {\n    activeRooms: ActiveRoom[];\n  }) => void;\n\n  'conn-prepare': (data: { connUserSocketId: string }) => void;\n\n\n  'conn-signal': (data: {\n    connUserSocketId: string;\n    signal: SimplePeer.SignalData;\n  }) => void;\n\n  'room-participant-left': (data: {\n    connUserSocketId: string;\n  }) => void;\n\n  'delete-chat-confirmation': (data: { userId: string }) => void; // Add confirmation event for delete chat\n}\n\ninterface ClientToServerEvents {\n  helloFomClient: () => void;\n  'conn-init': (data: { connUserSocketId: string }) => void; // Add this line\n  'upload-file': (data: { file: File; receiverUserId: string }) => void;\n\n  'direct-message': (data: {\n    message: string;\n    receiverUserId: string;\n  }) => void;\n\n  'group-message': (data: {\n    message: string;\n    groupChatId: string;\n  }) => void;\n\n  'direct-chat-history': (data: { receiverUserId: string }) => void;\n\n  'group-chat-history': (data: { groupChatId: string }) => void;\n\n  'notify-typing': (data: {\n    receiverUserId: string;\n    typing: boolean;\n  }) => void;\n\n  'call-request': (data: {\n    receiverUserId: string;\n    callerName: string;\n    audioOnly: boolean;\n    signal: SimplePeer.SignalData;\n  }) => void;\n\n  'call-response': (data: {\n    receiverUserId: string;\n    accepted: boolean;\n    signal?: SimplePeer.SignalData;\n  }) => void;\n\n  'notify-chat-left': (data: { receiverUserId: string }) => void;\n\n  'room-create': () => void;\n\n  'room-join': (data: { roomId: string }) => void;\n\n  'room-leave': (data: { roomId: string }) => void;\n\n  'conn-signal': (data: {\n    signal: SimplePeer.SignalData;\n    connUserSocketId: string;\n  }) => void;\n\n  'delete-chat': (data: { userId: string }) => void; // Add delete chat event\n}\n\nlet currentPeerConnection: any = null;\n\nconst setCurrentPeerConnection = (peerConnection: any) => {\n  currentPeerConnection = peerConnection;\n};\n\nlet socket: Socket<ServerToClientEvents, ClientToServerEvents>;\n\nconst generateUniqueId = (): string => {\n  return Math.random().toString(36).substr(2, 9);\n};\n\nconst SERVER_URL = 'http://localhost:5000';\n\nconst connectWithSocketServer = (userDetails: UserDetails) => {\n  socket = io(SERVER_URL, {\n    auth: {\n      token: userDetails.token,\n    },\n  });\n\n  socket.on('connect', () => {\n    console.log(\n      `Successfully connected to socket.io server. Connected socket.id: ${socket.id}`\n    );\n  });\n\n  socket.on('delete-chat-success', (data) => {\n    console.log(\"Received delete-chat-success event from backend:\", data);\n    store.dispatch(setMessages([])); // Clear messages on success\n});\n\nsocket.on('delete-chat-failed', (data) => {\n    console.error(\"Received delete-chat-failed event from backend:\", data.message);\n});\n\n\n\n  // Listen for chat deletion confirmation\n  socket.on('delete-chat-confirmation', (data) => {\n  const { userId } = data;\n  // Handle any UI updates or state changes needed after deletion\n    console.log(`Chat with user ${userId} has been deleted.`);\n});\n\n  socket.emit('helloFomClient');\n\n  socket.on('friend-invitations', (data) => {\n    store.dispatch(setPendingInvitations(data) as any);\n  });\n\n  socket.on('friends-list', (data) => {\n    const typingStatusOfFriends = data.map((friend) => {\n      return {\n        userId: friend.id,\n        typing: false,\n      };\n    });\n\n    store.dispatch(setInitialTypingStatus(typingStatusOfFriends));\n    store.dispatch(setFriends(data) as any);\n  });\n\n  socket.on('online-users', (data) => {\n    store.dispatch(setOnlineUsers(data) as any);\n  });\n\n  socket.on('groupChats-list', (data) => {\n    store.dispatch(setGroupChatList(data) as any);\n  });\n\n  socket.on('direct-chat-history', (data) => {\n    const { messages, participants } = data;\n\n    const chatDetails = store.getState().chat.chosenChatDetails;\n\n    if (chatDetails) {\n      const receiverId = chatDetails.userId;\n      const senderId = (store.getState().auth.userDetails as any)._id;\n\n      const isActive =\n        participants.includes(receiverId) &&\n        participants.includes(senderId);\n\n      if (isActive) {\n        store.dispatch(setMessages(messages) as any);\n      }\n    }\n  });\n\n  socket.on('group-chat-history', (data) => {\n    console.log(data);\n    const { messages, groupChatId } = data;\n\n    const groupChatDetails =\n      store.getState().chat.chosenGroupChatDetails;\n\n    if (groupChatDetails) {\n      const isActive = groupChatDetails.groupId === groupChatId;\n\n      if (isActive) {\n        store.dispatch(setMessages(messages) as any);\n      }\n    }\n  });\n\n  socket.on('direct-message', (data) => {\n    const { newMessage, participants } = data;\n\n    const chatDetails = store.getState().chat.chosenChatDetails;\n\n    if (chatDetails) {\n      const receiverId = chatDetails.userId;\n      const senderId = (store.getState().auth.userDetails as any)._id;\n\n      const isActive =\n        participants.includes(receiverId) &&\n        participants.includes(senderId);\n\n      if (isActive) {\n        store.dispatch(addNewMessage(newMessage) as any);\n      }\n    }\n  });\n\n  socket.on('group-message', (data) => {\n    const { newMessage, groupChatId } = data;\n\n    const chatDetails = store.getState().chat.chosenGroupChatDetails;\n\n    if (chatDetails) {\n      const isActive = chatDetails.groupId === groupChatId;\n\n      if (isActive) {\n        store.dispatch(addNewMessage(newMessage) as any);\n      }\n    }\n  });\n\n  socket.on('notify-typing', (data) => {\n    store.dispatch(\n      setTyping({\n        typing: data.typing,\n        userId: data.senderUserId,\n      }) as any\n    );\n  });\n\n  socket.on('call-request', (data) => {\n    store.dispatch(setCallRequest(data) as any);\n  });\n\n  socket.on('notify-chat-left', () => {\n    store.dispatch(clearVideoChat('User left the chat...!') as any);\n  });\n\n  // rooms\n  socket.on('room-create', (data: { roomDetails: ActiveRoom }) => {\n    newRoomCreated(data);\n  });\n\n  socket.on('active-rooms', (data: { activeRooms: ActiveRoom[] }) => {\n    updateActiveRooms(data);\n  });\n\n  socket.on(\n    'active-rooms-initial',\n    (data: { activeRooms: ActiveRoom[] }) => {\n      initialRoomsUpdate(data);\n    }\n  );\n\n  socket.on('conn-prepare', (data: { connUserSocketId: string }) => {\n    const { connUserSocketId } = data;\n    prepareNewPeerConnection(connUserSocketId, false);\n\n    socket.emit('conn-init', { connUserSocketId: connUserSocketId });\n  });\n\n  socket.on('conn-init', (data: { connUserSocketId: string }) => {\n    const { connUserSocketId } = data;\n    prepareNewPeerConnection(connUserSocketId, true);\n  });\n\n  socket.on(\n    'conn-signal',\n    (data: {\n      connUserSocketId: string;\n      signal: SimplePeer.SignalData;\n    }) => {\n      handleSignalingData(data);\n    }\n  );\n\n  socket.on(\n    'room-participant-left',\n    (data: { connUserSocketId: string }) => {\n      handleParticipantLeftRoom(data);\n    }\n  );\n\n  socket.on('upload-file', handleFileUpload);\n};\n\nconst uploadFile = (file: File, receiverUserId: string) => {\n  socket.emit('upload-file', { file, receiverUserId });\n};\n\nconst handleFileUpload = (data: { file: File; receiverUserId: string }) => {\n  const { file, receiverUserId } = data;\n\n  const userDetails = store.getState().auth.userDetails;\n\n  if (userDetails) {\n    store.dispatch(\n      addNewMessage({\n        _id: generateUniqueId(),\n        content: file.name,\n        author: {\n          username: userDetails.username,\n          _id: userDetails._id,\n        },\n        createdAt: new Date().toISOString(),\n      }) as any\n    );\n  } else {\n    console.error(\"User details are not available\");\n  }\n};\n\nconst sendDirectMessage = (data: {\n  message: string;\n  receiverUserId: string;\n}) => {\n  socket.emit('direct-message', data);\n};\n\nconst sendGroupMessage = (data: {\n  message: string;\n  groupChatId: string;\n}) => {\n  socket.emit('group-message', data);\n};\n\nconst fetchDirectChatHistory = (data: { receiverUserId: string }) => {\n  socket.emit('direct-chat-history', data);\n};\n\nconst fetchGroupChatHistory = (data: { groupChatId: string }) => {\n  socket.emit('group-chat-history', data);\n};\n\nconst notifyTyping = (data: {\n  receiverUserId: string;\n  typing: boolean;\n}) => {\n  socket.emit('notify-typing', data);\n};\n\nconst callRequest = (data: {\n  receiverUserId: string;\n  callerName: string;\n  audioOnly: boolean;\n}) => {\n  const peerConnection = () => {\n    const peer = newPeerConnection(true);\n\n    currentPeerConnection = peer;\n\n    peer.on('signal', (signal) => {\n      console.log('SIGNAL', signal);\n      socket.emit('call-request', {\n        ...data,\n        signal,\n      });\n    });\n\n    peer.on('stream', (stream) => {\n      console.log('REMOTE STREAM', stream);\n      store.dispatch(setRemoteStream(stream) as any);\n    });\n\n    socket.on('call-response', (data) => {\n      const status = data.accepted ? 'accepted' : 'rejected';\n      store.dispatch(setCallStatus(status) as any);\n\n      if (data.accepted && data.signal) {\n        console.log('ACCEPTED', data.signal);\n        store.dispatch(setOtherUserId(data.otherUserId) as any);\n        peer.signal(data.signal);\n      }\n    });\n  };\n\n  getLocalStreamPreview(data.audioOnly, () => {\n    peerConnection();\n    store.dispatch(setCallStatus('ringing') as any);\n    store.dispatch(setAudioOnly(data.audioOnly) as any);\n  });\n};\n\nconst callResponse = (data: {\n  receiverUserId: string;\n  accepted: boolean;\n  audioOnly: boolean;\n}) => {\n  socket.emit('call-response', data);\n\n  if (!data.accepted) {\n    return store.dispatch(setCallRequest(null) as any);\n  }\n\n  const peerConnection = () => {\n    const peer = newPeerConnection(false);\n\n    currentPeerConnection = peer;\n\n    peer.on('signal', (signal) => {\n      console.log('SIGNAL', signal);\n\n      socket.emit('call-response', {\n        ...data,\n        signal,\n      });\n    });\n    peer.on('stream', (stream) => {\n      console.log('REMOTE STREAM 1', stream);\n      store.dispatch(setRemoteStream(stream) as any);\n    });\n\n    peer.signal(store.getState().videoChat.callRequest?.signal!);\n  };\n\n  getLocalStreamPreview(data.audioOnly, () => {\n    peerConnection();\n    store.dispatch(setCallRequest(null) as any);\n    store.dispatch(setAudioOnly(data.audioOnly) as any);\n  });\n};\n\nconst notifyChatLeft = (receiverUserId: string) => {\n  socket.emit('notify-chat-left', {\n    receiverUserId,\n  });\n};\n\nconst createNewRoom = () => {\n  socket.emit('room-create');\n};\n\nconst joinRoom = (data: { roomId: string }) => {\n  socket.emit('room-join', data);\n};\n\nconst leaveRoom = (data: { roomId: string }) => {\n  socket.emit('room-leave', data);\n};\n\nconst signalPeerData = (data: {\n  signal: SimplePeer.SignalData;\n  connUserSocketId: string;\n}) => {\n  socket.emit('conn-signal', data);\n};\n\n// New function to handle chat deletion\nconst deleteChat = (data: { userId: string; otherUserId: string }) => {\n  console.log(\"Emitting delete-chat event with data:\", data); // Debug log\n  socket.emit('delete-chat', data);\n};\n\n\n\nexport {\n  connectWithSocketServer,\n  sendDirectMessage,\n  fetchDirectChatHistory,\n  notifyTyping,\n  callRequest,\n  callResponse,\n  notifyChatLeft,\n  currentPeerConnection,\n  setCurrentPeerConnection,\n  sendGroupMessage,\n  fetchGroupChatHistory,\n  createNewRoom,\n  joinRoom,\n  leaveRoom,\n  signalPeerData,\n  uploadFile,\n  deleteChat, // Export the deleteChat function\n};","import React, { useEffect, useRef } from \"react\";\nimport { styled } from \"@mui/system\";\n\nconst MainContainer = styled(\"div\")({\n    borderRadius: \"8px\",\n    width: \"100%\",\n    height: \"100%\",\n});\n\nconst VideoEl = styled(\"video\")({\n    height: \"100%\",\n    borderRadius: \"8px\",\n    display: \"block\",\n    maxWidth: \"100%\",\n    backgroundColor: \"transparent\",\n});\n\nconst Video: React.FC<{\n    stream: MediaStream;\n    isLocalStream: boolean;\n    dimensions: {\n        x: number,\n        y: number\n    }\n}> = ({ stream, isLocalStream, dimensions }) => {\n\n    const videoRef = useRef<HTMLVideoElement>(null);\n\n    useEffect(() => {\n        const video = videoRef.current;\n        video!.srcObject = stream;\n\n        video!.onloadedmetadata = () => {\n            video!.play()\n\n            if (isLocalStream) {\n                video!.muted = true;\n                video!.volume = 0;\n            }\n        };\n\n    }, [stream, isLocalStream]);\n\n    return (\n        <MainContainer style={{ height: dimensions.y, width: dimensions.x }}>\n            <VideoEl\n                ref={videoRef}\n                autoPlay\n                muted={isLocalStream}\n            />\n        </MainContainer>\n    );\n};\n\nexport default Video;\n","import { useEffect, useState } from \"react\";\nimport { getVideoBoxSize } from \"../getVideoBoxSize\";\n\nconst TOP_BAR_HEIGHT = 40;\n\nconst useVideoSize = (\n    N = 1,\n    AR = 1\n): { x: number; y: number; X: number; Y: number } => {\n    const [size, setSize] = useState<{ X?: number; Y?: number }>({});\n    const [isMobile, setIsMobile] = useState(\n        window.matchMedia(\"(max-width: 480px)\").matches\n    );\n\n    useEffect(() => {\n        const listener = (e: MediaQueryListEvent) => {\n            if (e.matches) {\n                setIsMobile(true);\n            } else {\n                setIsMobile(false);\n            }\n        };\n        window\n            .matchMedia(\"(max-width: 480px)\")\n            .addEventListener(\"change\", listener);\n\n        return () =>\n            window\n                .matchMedia(\"(max-width: 480px)\")\n                .removeEventListener(\"change\", listener);\n    }, [setIsMobile]);\n\n    useEffect(() => {\n        const listener = () => {\n            // on mobiles, dont listen to change\n            if (isMobile) {\n                return;\n            }\n            const Y = window.innerHeight - TOP_BAR_HEIGHT;\n            const X = window.innerWidth;\n            setSize({ X, Y });\n        };\n        // initial values\n        const Y = window.innerHeight - TOP_BAR_HEIGHT;\n        const X = window.innerWidth;\n        setSize({ X, Y });\n        window.addEventListener(\"resize\", listener);\n        return () => {\n            window.removeEventListener(\"resize\", listener);\n        };\n    }, [isMobile, setSize]);\n\n    const { X = 500, Y = 800 } = size; // bad defaults\n    const { x, y } = getVideoBoxSize(X, Y, N, AR);\n\n    // x = isMobile ? X : x\n    // y = isMobile ? X / AR : y\n\n    return { x, y, X, Y };\n};\n\nexport default useVideoSize;\n","export function getVideoBoxSize(\n    X: number,\n    Y: number,\n    n: number,\n    aspect_ratio = 1\n): { x: number; y: number } {\n    // total number of tiles\n    const tile_count: number = n;\n    // height of rectangle\n    const b: number = Y;\n    // width of rectanlge\n    const a: number = X;\n\n    // divide the area but the number of tiles to get the max area a tile could cover\n    // this optimal size for a tile will more often than not make the tiles overlap, but\n    // a tile can never be bigger than this size\n    let sizeX: number = Math.sqrt((b * a * aspect_ratio) / tile_count);\n    // find the number of whole tiles that can fit into the height\n    let numberOfPossibleWholeTilesH: number = Math.floor(\n        (b * aspect_ratio) / sizeX\n    );\n    // find the number of whole tiles that can fit into the width\n    let numberOfPossibleWholeTilesW: number = Math.floor(a / sizeX);\n    // works out how many whole tiles this configuration can hold\n    let total: number =\n        numberOfPossibleWholeTilesH * numberOfPossibleWholeTilesW;\n\n    // if the number of number of whole tiles that the max size tile ends up with is less than the require number of\n    // tiles, make the maxSize smaller and recaluate\n    while (total < tile_count) {\n        sizeX--;\n        numberOfPossibleWholeTilesH = Math.floor((b * aspect_ratio) / sizeX);\n        numberOfPossibleWholeTilesW = Math.floor(a / sizeX);\n        total = numberOfPossibleWholeTilesH * numberOfPossibleWholeTilesW;\n    }\n\n    return {\n        x: sizeX,\n        y: sizeX / aspect_ratio,\n    };\n}\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport Video from \"./Video\";\nimport { useAppSelector } from \"../../store\" \nimport { Typography } from \"@mui/material\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport useVideoSize from \"../../utils/hooks/useVideoSize\";\n\nconst AR = 4 / 3;\n\nconst MainContainer = styled(\"div\")({\n    height: \"85%\",\n    width: \"100%\",\n    padding: \"10px\",\n    overflowY: \"scroll\",\n    display: \"flex\",\n    margin: \"0px\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    gap: \"10px\",\n    alignItems: \"center\",\n    flexWrap: \"wrap\",\n});\n\nconst VideosContainer: React.FC<{\n    isRoomMinimized: boolean;\n}> = ({\n    isRoomMinimized\n}) => {\n    const {\n        videoChat: {\n            localStream,\n            callStatus,\n            remoteStream,\n            screenSharingStream,\n        },\n        room: {\n            localStreamRoom,\n            remoteStreams,\n            screenSharingStream: screenSharingStreamRoom,\n        },\n    } = useAppSelector((state) => state);\n\n    const matches = useMediaQuery(\"(max-width:800px)\");\n\n    \n    const { x, y, X } = useVideoSize(remoteStreams.length + 1, AR);\n    const { x: xDirectCall, y: yDirectCall } = useVideoSize(2, AR);\n\n\n    return (\n        <MainContainer\n            sx={{\n                ...(matches &&\n                    isRoomMinimized && {\n                        height: \"100%\",\n                        width: \"85%\",\n                    }),\n            }}\n        >\n            {localStream && (\n                <Video\n                    stream={\n                        screenSharingStream ? screenSharingStream : localStream\n                    }\n                    isLocalStream={true}\n                    dimensions={{ x: xDirectCall, y: yDirectCall }}\n                />\n            )}\n\n            {localStreamRoom && (\n                <Video\n                    stream={\n                        screenSharingStreamRoom\n                            ? screenSharingStreamRoom\n                            : localStreamRoom\n                    }\n                    isLocalStream={true}\n                    dimensions={{ x, y }}\n                />\n            )}\n\n            {callStatus !== \"accepted\" && (\n                <Typography\n                    sx={{\n                        color: \"#b9bbbe\",\n                        fontSize: \"15px\",\n                        fontWeight: \"bold\",\n                        width: \"100%\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                    }}\n                >\n                    {callStatus === \"ringing\"\n                        ? \"Ringing....\"\n                        : callStatus === \"rejected\" && \"Call Rejected\"}\n                </Typography>\n            )}\n\n            {remoteStream && (\n                <Video\n                    stream={remoteStream}\n                    isLocalStream={false}\n                    dimensions={{ x: xDirectCall, y: yDirectCall }}\n                />\n            )}\n\n            {remoteStreams.map((stream) => (\n                <Video\n                    stream={stream}\n                    key={stream.id}\n                    isLocalStream={false}\n                    dimensions={{ x, y }}\n                />\n            ))}\n        </MainContainer>\n    );\n};\n\n\nexport default VideosContainer;\n","import React, { useState } from \"react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport VideocamIcon from \"@mui/icons-material/Videocam\";\nimport VideocamOffIcon from \"@mui/icons-material/VideocamOff\";\n\nconst Camera: React.FC<{\n    localStream: MediaStream;\n}> = ({localStream}) => {\n    const [cameraEnabled, setCameraEnabled] = useState(true);\n\n    const handleToggleCamera = () => {\n        localStream.getVideoTracks().forEach((track) => track.enabled = !track.enabled);\n        setCameraEnabled(!cameraEnabled);\n    };\n\n    return (\n        <IconButton onClick={handleToggleCamera} style={{ color: \"white\" }}>\n            {cameraEnabled ? <VideocamIcon /> : <VideocamOffIcon />}\n        </IconButton>\n    );\n};\n\nexport default Camera;\n","import React, { useState } from \"react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport MicIcon from \"@mui/icons-material/Mic\";\nimport MicOffIcon from \"@mui/icons-material/MicOff\";\n\nconst Microphone: React.FC<{\n    localStream: MediaStream;\n}> = ({localStream}) => {\n    const [micEnabled, setMicEnabled] = useState(true);\n\n    const handleToggleMic = () => {\n        localStream.getAudioTracks().forEach((track) => track.enabled = !track.enabled);\n        setMicEnabled(!micEnabled);\n    };\n\n    return (\n        <IconButton onClick={handleToggleMic} style={{ color: \"white\" }}>\n            {micEnabled ? <MicIcon /> : <MicOffIcon />}\n        </IconButton>\n    );\n};\n\nexport default Microphone;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport IconButton from \"@mui/material/IconButton\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport { useAppSelector } from \"../../../store\";\nimport { clearVideoChat } from \"../../../actions/videoChatActions\";\nimport { notifyChatLeft } from \"../../../socket/socketConnection\";\nimport { leaveRoom } from \"../../../socket/roomHandler\";\n\ntype CallType = \"DIRECT CALL\" | \"ROOM\"\n\n\nconst CloseRoom = ({ type } : { type: CallType }) => {\n    const dispatch = useDispatch();\n    const {\n        videoChat: { otherUserId  },\n    } = useAppSelector((state) => state);\n\n    const handleLeaveRoom = () => {\n\n        // notify other user that I left the call\n        if (type === \"DIRECT CALL\") {\n\n            if(otherUserId) {\n                notifyChatLeft(otherUserId);\n            }\n            dispatch(clearVideoChat(\"You left the chat\"));\n        }\n\n        if(type === \"ROOM\") {\n            leaveRoom();\n        }\n    };\n\n    return (\n        <IconButton onClick={handleLeaveRoom} style={{ color: \"white\" }}>\n            <CloseIcon />\n        </IconButton>\n    );\n};\n\nexport default CloseRoom;\n","import React, { useState } from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ScreenShareIcon from \"@mui/icons-material/ScreenShare\";\nimport StopScreenShareIcon from \"@mui/icons-material/StopScreenShare\";\nimport { VideoChatState } from \"../../../reducers/videoChatReducer\";\nimport { setScreenSharingStream } from \"../../../actions/videoChatActions\";\nimport { currentPeerConnection } from \"../../../socket/socketConnection\";\nimport { RoomState } from \"../../../reducers/roomReducer\";\nimport { switchOutgoingTracks } from \"../../../socket/webRTC\";\nimport { setScreenSharingStreamRoom } from \"../../../actions/roomActions\";\n\ntype CallType = \"DIRECT CALL\" | \"ROOM\";\n\nconst ScreenShare: React.FC<{\n    videoChat?: VideoChatState;\n    room?: RoomState;\n    type: CallType\n}> = ({ videoChat, type, room }) => {\n\n    const dispatch = useDispatch();\n    const [screenShareEnabled, setScreenShareEnabled] = useState(false);\n\n    const handleScreenShareToggle = async () => {\n\n        if(type === \"DIRECT CALL\") {\n            handleDirectCall();\n        }\n\n        if(type === \"ROOM\") {\n            handleRoomCall()\n        }\n    };\n\n\n    const handleDirectCall = async () => {\n\n        if(!videoChat) {\n            return\n        }\n\n        if (screenShareEnabled) {\n            try {\n                currentPeerConnection?.replaceTrack(\n                    videoChat.screenSharingStream?.getVideoTracks()[0],\n                    currentPeerConnection.streams[0].getVideoTracks()[0],\n                    videoChat?.localStream\n                );\n            } catch (err) {\n                console.log(err);\n            }\n\n            videoChat.screenSharingStream\n                ?.getTracks()\n                .forEach((track) => track.stop());\n            dispatch(setScreenSharingStream(null));\n            setScreenShareEnabled(false);\n        } else {\n            const mediaDevices = navigator.mediaDevices as any;\n            const screenShareStream = await mediaDevices.getDisplayMedia({\n                video: true,\n                audio: false,\n            });\n            dispatch(setScreenSharingStream(screenShareStream));\n            setScreenShareEnabled(true);\n\n            // replace outgoing local stream with screen share stream\n            // replaceTrack (oldTrack, newTrack, oldStream);\n            currentPeerConnection?.replaceTrack(\n                currentPeerConnection.streams[0].getVideoTracks()[0],\n                screenShareStream.getTracks()[0],\n                currentPeerConnection.streams[0]\n            );\n\n            // const screenTrack = screenShareStream.getVideoTracks()[0];\n\n            // screenTrack.onended = function () {\n            //     currentPeerConnection?.replaceTrack(screenTrack, videoChat.localStream?.getTracks()[0], currentPeerConnection.streams[0]);\n            // };\n        }\n    }\n\n\n    const handleRoomCall = async () => {\n\n        console.log(\"hi\")\n        console.log(room)\n        if(!room || !room.localStreamRoom) {\n            return \n        }\n\n        console.log(\"hi2\");\n        if (!screenShareEnabled) {\n            console.log(\"hi3\");\n            let stream = null;\n            try {\n                const mediaDevices = navigator.mediaDevices as any;\n                stream = await mediaDevices.getDisplayMedia({\n                    video: true,\n                    audio: false,\n                });\n            } catch (err) {\n                console.log(\n                    \"error occurred when trying to get an access to screen share stream\"\n                );\n            }\n\n            if (stream) {\n                setScreenSharingStreamRoom(stream);\n                switchOutgoingTracks(stream);\n                setScreenShareEnabled(true);\n            }\n        } else {\n            switchOutgoingTracks(room.localStreamRoom);\n            room.screenSharingStream?.getTracks().forEach((t) => t.stop());\n            setScreenSharingStreamRoom(null);\n            setScreenShareEnabled(false);\n        }\n    }\n\n    return (\n        <IconButton\n            onClick={handleScreenShareToggle}\n            style={{ color: \"white\" }}\n        >\n            {screenShareEnabled ? (\n                <StopScreenShareIcon />\n            ) : (\n                <ScreenShareIcon />\n            )}\n        </IconButton>\n    );\n};\n\nexport default ScreenShare;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport IconButton from \"@mui/material/IconButton\";\nimport CloseFullscreenIcon from \"@mui/icons-material/CloseFullscreen\";\nimport OpenInFullIcon from \"@mui/icons-material/OpenInFull\";\n\nconst MainContainer = styled(\"div\")({\n    // position: \"absolute\",\n    // top: \"20px\",\n    // right: \"20px\",\n});\n\n\n\nconst ResizeRoomButton: React.FC<{\n    isRoomMinimized: boolean;\n    handleRoomResize: () => void;\n}> = ({ isRoomMinimized, handleRoomResize }) => {\n    return (\n        <MainContainer>\n            <IconButton style={{ color: \"white\" }} onClick={handleRoomResize}>\n                {isRoomMinimized ? <OpenInFullIcon /> : <CloseFullscreenIcon />}\n            </IconButton>\n        </MainContainer>\n    );\n};\n\nexport default ResizeRoomButton;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport Camera from \"./Camera\";\nimport Microphone from \"./Microphone\";\nimport CloseRoom from \"./CloseRoom\";\nimport ScreenShare from \"./ScreenShare\";\nimport {useAppSelector} from \"../../../store\"\nimport ResizeRoomButton from \"../ResizeRoomButton\";\n\n\nconst MainContainer = styled(\"div\")({\n    height: \"15%\",\n    width: \"100%\",\n    backgroundColor: \"#5865f2\",\n    borderTopLeftRadius: \"8px\",\n    borderTopRightRadius: \"8px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n});\n\nconst RoomButtons: React.FC<{\n    isRoomMinimized: boolean;\n    handleRoomResize: () => void;\n}> = ({ isRoomMinimized, handleRoomResize }) => {\n    const {videoChat, room} = useAppSelector((state) => state);\n    const matches = useMediaQuery(\"(max-width:800px)\");\n\n    return (\n        <>\n            {videoChat.localStream ? (\n                <MainContainer\n                    sx={{\n                        ...(matches &&\n                            isRoomMinimized && {\n                                height: \"100%\",\n                                width: \"15%\",\n                                flexDirection: \"column\",\n                            }),\n                    }}\n                >\n                    {!videoChat.audioOnly && (\n                        <>\n                            <ScreenShare\n                                videoChat={videoChat}\n                                type=\"DIRECT CALL\"\n                            />\n                            <Camera localStream={videoChat.localStream} />\n                        </>\n                    )}\n                    <Microphone localStream={videoChat.localStream} />\n                    <CloseRoom type=\"DIRECT CALL\" />\n                    <ResizeRoomButton\n                        isRoomMinimized={isRoomMinimized}\n                        handleRoomResize={handleRoomResize}\n                    />\n                </MainContainer>\n            ) : room.localStreamRoom ? (\n                <MainContainer\n                    sx={{\n                        ...(matches &&\n                            isRoomMinimized && {\n                                height: \"100%\",\n                                width: \"15%\",\n                                flexDirection: \"column\",\n                            }),\n                    }}\n                >\n                    {!room.isUserJoinedWithOnlyAudio && (\n                        <ScreenShare room={room} type=\"ROOM\" />\n                    )}\n                    <Microphone localStream={room.localStreamRoom} />\n                    {!room.isUserJoinedWithOnlyAudio && (\n                        <Camera localStream={room.localStreamRoom} />\n                    )}\n                    <CloseRoom type=\"ROOM\" />\n                    <ResizeRoomButton\n                        isRoomMinimized={isRoomMinimized}\n                        handleRoomResize={handleRoomResize}\n                    />\n                </MainContainer>\n            ) : null}\n        </>\n    );\n};\n\n\nexport default RoomButtons\n\n","import React, { useState } from \"react\";\nimport { styled } from \"@mui/system\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport ResizeRoomButton from \"./ResizeRoomButton\";\nimport VideosContainer from \"./VideosContainer\";\nimport RoomButtons from \"./RoomButtons\";\n\nconst drawerWidth = 240;\n\nconst MainContainer = styled(\"div\")({\n    position: \"absolute\",\n    borderRadius: \"8px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"#202225\",\n    transition: \"all 0.5s ease-in-out\",\n});\n\nconst fullScreenRoomStyle = {\n    height: \"100vh\",\n    zIndex: 200,\n};\n\nconst minimizedRoomStyle = {\n    zIndex: 200,\n    top: \"0px\",\n    right: \"0px\",\n    width: \"30%\",\n    height: \"40vh\",\n};\n\nconst VideoChat = () => {\n    const [isRoomMinimized, setIsRoomMinimized] = useState(true);\n\n    const roomResizeHandler = () => {\n        setIsRoomMinimized(!isRoomMinimized);\n    };\n\n    const matches = useMediaQuery(\"(max-width:800px)\");\n\n    return (\n        <MainContainer\n            sx={{\n                ...(isRoomMinimized\n                    ? {\n                          ...minimizedRoomStyle,\n                          ...(matches && { width: \"70%\" }),\n                      }\n                    : {\n                          ...fullScreenRoomStyle,\n                          width: {\n                              xs: `calc(100vw)`,\n                              sm: `calc(100vw - ${drawerWidth}px)`,\n                          },\n                      }),\n                ...(matches &&\n                    isRoomMinimized && {\n                        flexDirection: \"row\",\n                    }),\n            }}\n        >\n            <VideosContainer isRoomMinimized={isRoomMinimized} />\n            <RoomButtons\n                isRoomMinimized={isRoomMinimized}\n                handleRoomResize={roomResizeHandler}\n            />\n        </MainContainer>\n    );\n};\n\nexport default VideoChat;\n","import React from 'react'\nimport { styled } from \"@mui/system\";\nimport Backdrop from '@mui/material/Backdrop';\nimport Typography from \"@mui/material/Typography\";\nimport IconButton from \"@mui/material/IconButton\";\nimport PhoneInTalkIcon from \"@mui/icons-material/PhoneInTalk\";\nimport PhoneDisabledIcon from \"@mui/icons-material/PhoneDisabled\";\nimport VideocamIcon from \"@mui/icons-material/Videocam\";\nimport { useAppSelector } from '../store';\nimport { callResponse } from '../socket/socketConnection';\n\n\nconst MainContainer = styled(\"div\")({\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#fff\",\n    padding: \"15px 20px\",\n    borderRadius: \"30px\",\n});\n\n\n\nconst IncomingCall = () => {\n    const callRequest = useAppSelector(state => state.videoChat.callRequest);\n\n\n    const handleCall = (accepted: boolean, audioOnly: boolean) => {\n\n        callResponse({\n            receiverUserId: callRequest!.callerUserId,\n            accepted,\n            audioOnly\n        });\n       \n    };\n   \n\n  return (\n      <Backdrop\n          sx={{\n              color: \"#fff\",\n              zIndex: (theme) => theme.zIndex.drawer + 1,\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n          }}\n          open={!!callRequest?.callerUserId}\n      >\n          <MainContainer>\n              <Typography\n                  sx={{\n                      color: \"black\",\n                      marginBottom: \"3px\",\n                      fontSize: \"16px\",\n                      fontWeight: \"bold\",\n                  }}\n              >\n                  Incoming {callRequest?.audioOnly ? \"audio\" : \"video\"} call from{\" \"}\n                  {callRequest?.callerName}\n              </Typography>\n\n              <div>\n                  {!callRequest?.audioOnly && (\n                      <IconButton\n                          color=\"success\"\n                          onClick={() => {\n                              handleCall(true, false);\n                          }}\n                      >\n                          <VideocamIcon />\n                      </IconButton>\n                  )}\n\n                  {/* <IconButton\n                      color=\"success\"\n                      onClick={() => {\n                          handleCall(true, false);\n                      }}\n                  >\n                      <VideocamIcon />\n                  </IconButton> */}\n\n                  <IconButton\n                      color=\"success\"\n                      onClick={() => {\n                          handleCall(true, true);\n                      }}\n                  >\n                      <PhoneInTalkIcon />\n                  </IconButton>\n\n                  <IconButton\n                      color=\"error\"\n                      onClick={() => {\n                          handleCall(false, true);\n                      }}\n                  >\n                      <PhoneDisabledIcon />\n                  </IconButton>\n              </div>\n          </MainContainer>\n      </Backdrop>\n  );\n}\n\nexport default IncomingCall","export default __webpack_public_path__ + \"static/media/robot.0617a419.gif\";","import React from \"react\";\nimport { Typography } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport Robot from \"./robot.gif\";\n\nconst Wrapper = styled(\"div\")({\n    flexGrow: 1,\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: \"16px\",\n    textAlign: \"center\"\n});\n\nconst WelcomeMessage = () => {\n    return (\n        <Wrapper>\n            <img src={Robot} alt=\"robot greeting welcome\" style={{ height: \"15rem\" }}/>\n            <Typography variant=\"h6\" sx={{ color: \"white\" }}>\n                To start chatting - select a friend for conversation\n            </Typography>\n        </Wrapper>\n    );\n};\n\nexport default WelcomeMessage;","import React from \"react\";\nimport { styled } from \"@mui/system\";\n\nconst AvatarPreview = styled(\"div\")({\n    height: \"32px\",\n    width: \"32px\",\n    backgroundColor: \"#5865f2\",\n    borderRadius: \"50%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    fontSize: \"18px\",\n    fontWeight: \"500\",\n    color: \"white\",\n});\n\nconst Avatar = ({ username, large }: {\n    username: string,\n    large?: boolean,\n}) => {\n    return (\n        <AvatarPreview style={large ? { height: \"80px\", width: \"80px\" } : {}}>\n            {username?.substring(0, 2)}\n        </AvatarPreview>\n    );\n};\n\nexport default Avatar;\n","import { Dispatch } from \"redux\";\nimport { createGroupChat, addMembersToGroup, leaveGroup, deleteGroup } from \"../api/api\";\nimport { AddMembersToGroupArgs, DeleteGroupArgs, LeaveGroupArgs } from \"../api/types\";\nimport { showAlert } from \"./alertActions\";\nimport { resetChatAction } from \"./chatActions\";\n// import { actionTypes, CurrentUser } from \"./types\";\n\nexport const createGroupChatAction = (\n    name: string,\n    closeDialogHandler: () => void\n) => {\n    return async (dispatch: Dispatch) => {\n        const response = await createGroupChat(name);\n\n        if (response === \"Group created successfully\") {\n            closeDialogHandler();\n            dispatch(showAlert(response));\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};\n\nexport const addMembersToGroupAction = (\n    args: AddMembersToGroupArgs,\n    closeDialogHandler: () => void\n) => {\n    return async (dispatch: Dispatch) => {\n        const response = await addMembersToGroup(args);\n\n        if (response === \"Members added successfully!\") {\n            closeDialogHandler();\n            dispatch(showAlert(response));\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};\n\nexport const leaveGroupAction = (\n    args: LeaveGroupArgs,\n) => {\n    return async (dispatch: Dispatch) => {\n        const response = await leaveGroup(args);\n\n        if (response === \"You have left the group!\") {\n            dispatch(showAlert(response));\n            dispatch(resetChatAction())\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};\n\nexport const deleteGroupAction = ({ groupChatId, groupChatName } : {groupChatId: string; groupChatName: string}) => {\n    return async (dispatch: Dispatch) => {\n        const response = await deleteGroup({groupChatId});\n\n        if (response === \"Group deleted successfully!\") {\n            dispatch(showAlert(`You deleted the \"${groupChatName}\" group!`));\n            dispatch(resetChatAction());\n        } else {\n            dispatch(showAlert(response.message));\n        }\n    };\n};","import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport Typography from \"@mui/material/Typography\";\nimport { Button } from \"@mui/material\";\nimport styled from \"@emotion/styled\";\nimport { Theme, useTheme } from \"@mui/material/styles\";\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\nimport { useAppSelector } from \"../../../../store\";\nimport { addMembersToGroupAction } from \"../../../../actions/groupChatActions\";\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n    PaperProps: {\n        style: {\n            maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n            width: 250,\n        },\n    },\n};\n\nconst names = [\n    \"Oliver Hansen\",\n    \"Van Henry\",\n    \"April Tucker\",\n    \"Ralph Hubbard\",\n    \"Omar Alexander\",\n    \"Carlos Abbott\",\n    \"Miriam Wagner\",\n    \"Bradley Wilkerson\",\n    \"Virginia Andrews\",\n    \"Kelly Snyder\",\n];\n\nfunction getStyles(name: string, personName: string[], theme: Theme) {\n    return {\n        fontWeight:\n            personName.indexOf(name) === -1\n                ? theme.typography.fontWeightRegular\n                : theme.typography.fontWeightMedium,\n    };\n}\n\n\ninterface Props {\n    isDialogOpen: boolean;\n    closeDialogHandler: () => void;\n}\n\nconst AddMembersToGroupDialog = ({\n    isDialogOpen,\n    closeDialogHandler,\n}: Props) => {\n    const {\n        friends: { friends },\n        chat: { chosenGroupChatDetails },\n    } = useAppSelector((state) => state);\n    \n    const currentGroupMembers = chosenGroupChatDetails?.participants.map(\n        (participant) => {\n            return participant._id.toString();\n        }\n    );\n    const theme = useTheme();\n    const [friendIds, setFriendIds] = React.useState<string[]>(\n        currentGroupMembers || []\n    );\n\n\n    const handleChange = (event: SelectChangeEvent<typeof friendIds>) => {\n        const {\n            target: { value },\n        } = event;\n        setFriendIds(\n            // On autofill we get a stringified value.\n            typeof value === \"string\" ? value.split(\",\") : value\n        );\n    };\n\n    const dispatch = useDispatch();\n\n    const handleCloseDialog = () => {\n        closeDialogHandler();\n    };\n\n    const handleClick = () => {\n        dispatch(addMembersToGroupAction({\n            friendIds,\n            groupChatId: chosenGroupChatDetails?.groupId as string\n        }, handleCloseDialog));\n    };\n\n\n    return (\n        <div>\n            <Dialog open={isDialogOpen} onClose={handleCloseDialog}>\n                <DialogTitle>\n                    <Typography>Add friends to \"{chosenGroupChatDetails?.groupName}\" group</Typography>\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        <Typography>Select friends to add</Typography>\n                    </DialogContentText>\n\n                    <FormControl sx={{ m: 1, width: 300 }}>\n                        <InputLabel id=\"demo-multiple-name-label\">\n                            Name\n                        </InputLabel>\n                        <Select\n                            labelId=\"demo-multiple-name-label\"\n                            id=\"demo-multiple-name\"\n                            multiple\n                            value={friendIds}\n                            onChange={handleChange}\n                            input={<OutlinedInput label=\"Name\" />}\n                            MenuProps={MenuProps}\n                        >\n                            {friends.map((friend) => (\n                                <MenuItem\n                                    key={friend.id}\n                                    value={friend.id}\n                                    style={getStyles(friend.username, friendIds, theme)}\n                                >\n                                    {friend.username}\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        sx={{\n                            bgcolor: \"#5865F2\",\n                            color: \"white\",\n                            textTransform: \"none\",\n                            fontSize: \"16px\",\n                            fontWeight: 500,\n                            width: \"100%\",\n                            height: \"40px\",\n                            marginLeft: \"15px\",\n                            marginRight: \"15px\",\n                            marginBottom: \"10px\",\n                        }}\n                        onClick={handleClick}\n                        disabled={friendIds.length === 0}\n                    >\n                        Add\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default AddMembersToGroupDialog;\n","import React, { Fragment } from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Divider from \"@mui/material/Divider\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport Typography from \"@mui/material/Typography\";\nimport Avatar from \"../../../../components/Avatar\";\n\ninterface GroupChatDetails {\n    groupId: string;\n    groupName: string;\n    participants: Array<{\n        _id: string;\n        username: string;\n        email: string;\n    }>;\n    admin: {\n        _id: string;\n        username: string;\n        email: string;\n    };\n}\n\ninterface Props {\n    isDialogOpen: boolean;\n    closeDialogHandler: () => void;\n    groupDetails: GroupChatDetails;\n    currentUserId: string;\n}\n\nconst GroupParticipantsDialog = ({\n    isDialogOpen,\n    closeDialogHandler,\n    groupDetails,\n    currentUserId\n}: Props) => {\n    const handleCloseDialog = () => {\n        closeDialogHandler();\n    };\n\n    return (\n        <div>\n            <Dialog open={isDialogOpen} onClose={handleCloseDialog}>\n                <DialogTitle>\n                    <Typography>{groupDetails.groupName}</Typography>\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        <Typography>\n                            {groupDetails.participants.length}{\" \"}\n                            {groupDetails.participants.length > 1\n                                ? \"Participants\"\n                                : \"Participant\"}\n                        </Typography>\n                    </DialogContentText>\n                    <List\n                        sx={{\n                            width: \"100%\",\n                            maxWidth: 300,\n                            bgcolor: \"background.paper\",\n                        }}\n                    >\n                        {groupDetails.participants.map((participant) => {\n                            return (\n                                <Fragment key={participant._id}>\n                                    <ListItem alignItems=\"flex-start\">\n                                        <ListItemAvatar>\n                                            <Avatar\n                                                username={participant.username}\n                                            />\n                                        </ListItemAvatar>\n                                        <ListItemText\n                                            primary={`${participant.username} ${\n                                                participant._id ===\n                                                currentUserId\n                                                    ? \"(You)\"\n                                                    : \"\"\n                                            }`}\n                                            secondary={\n                                                <React.Fragment>\n                                                    <Typography\n                                                        sx={{\n                                                            display: \"inline\",\n                                                        }}\n                                                        component=\"span\"\n                                                        variant=\"body2\"\n                                                        color=\"text.primary\"\n                                                    >\n                                                        {participant.email}\n                                                    </Typography>\n                                                    {` ${\n                                                        participant._id ===\n                                                        groupDetails.admin?._id\n                                                            ? \"  Group Admin\"\n                                                            : \"\"\n                                                    }`}\n                                                </React.Fragment>\n                                            }\n                                        />\n                                    </ListItem>\n                                    <Divider variant=\"inset\" component=\"li\" />\n                                </Fragment>\n                            );\n                        })}\n                    </List>\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default GroupParticipantsDialog;\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport { IconButton } from \"@mui/material\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport AddMembersToGroupDialog from \"./AddMembersToGroupDialog\";\nimport { useAppSelector } from \"../../../../store\";\nimport GroupParticipantsDialog from \"./GroupParticipantsDialog\";\nimport { deleteGroupAction, leaveGroupAction } from \"../../../../actions/groupChatActions\";\nimport { removeFriendAction } from \"../../../../actions/friendActions\";\n\nexport default function ChatDropDown() {\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n    const open = Boolean(anchorEl);\n\n    const [isDialogOpen, setIsDialogOpen] = useState(false);\n    const [participantsDialogOpen, setParticipantsDialogOpen] = useState(false);\n\n    const {\n        chat: { chosenGroupChatDetails, chosenChatDetails },\n        auth: {userDetails}\n    } = useAppSelector((state) => state);\n    const dispatch = useDispatch();\n\n    const handleMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleOpenDialog = () => {\n        setIsDialogOpen(true);\n    };\n\n    const handleCloseDialog = () => {\n        setIsDialogOpen(false);\n    };\n\n    const handleParticipantsOpenDialog = () => {\n        setParticipantsDialogOpen(true);\n    };\n\n    const handleParticipantsCloseDialog = () => {\n        setParticipantsDialogOpen(false);\n    };\n\n    const handleLeaveGroup = () => {\n        \n        if(chosenGroupChatDetails) {\n            dispatch(leaveGroupAction({\n            groupChatId: chosenGroupChatDetails.groupId\n        }))\n        }\n    };\n\n    const handleDeleteGroup = () => {\n        if (chosenGroupChatDetails) {\n            dispatch(\n                deleteGroupAction({\n                    groupChatId: chosenGroupChatDetails.groupId,\n                    groupChatName: chosenGroupChatDetails.groupName\n                })\n            );\n        }\n    };\n\n\n    const handleRemoveFriend = () => {\n        \n        if(chosenChatDetails) {\n            dispatch(removeFriendAction({\n                friendId: chosenChatDetails.userId,\n                friendName: chosenChatDetails.username\n            }));\n        }\n    }\n\n    return (\n        <>\n            <div>\n                <IconButton\n                    onClick={(e) => setAnchorEl(e.currentTarget)}\n                    style={{ color: \"white\", marginLeft: \"0px\" }}\n                >\n                    <MoreVertIcon />\n                </IconButton>\n                <Menu\n                    id=\"basic-menu\"\n                    anchorEl={anchorEl}\n                    open={open}\n                    onClose={handleMenuClose}\n                    MenuListProps={{\n                        \"aria-labelledby\": \"basic-button\",\n                    }}\n                >\n                    {chosenGroupChatDetails &&\n                        (chosenGroupChatDetails.admin._id ===\n                        userDetails?._id ? (\n                            <>\n                                <MenuItem onClick={handleOpenDialog}>\n                                    Add Members\n                                </MenuItem>\n                                <MenuItem onClick={handleDeleteGroup}>\n                                    Delete Group\n                                </MenuItem>\n                            </>\n                        ) : (\n                            <MenuItem onClick={handleLeaveGroup}>\n                                Leave Group\n                            </MenuItem>\n                        ))}\n\n                    {chosenGroupChatDetails && (\n                        <MenuItem onClick={handleParticipantsOpenDialog}>\n                            View Participants (\n                            {chosenGroupChatDetails.participants.length})\n                        </MenuItem>\n                    )}\n\n                    {chosenChatDetails && (\n                        <MenuItem onClick={handleRemoveFriend}>\n                            Remove Friend\n                        </MenuItem>\n                    )}\n                </Menu>\n            </div>\n\n            {chosenGroupChatDetails && userDetails && (\n                <>\n                    <AddMembersToGroupDialog\n                        isDialogOpen={isDialogOpen}\n                        closeDialogHandler={handleCloseDialog}\n                    />\n                    <GroupParticipantsDialog\n                        isDialogOpen={participantsDialogOpen}\n                        closeDialogHandler={handleParticipantsCloseDialog}\n                        groupDetails={chosenGroupChatDetails}\n                        currentUserId={userDetails._id}\n                    />\n                </>\n            )}\n        </>\n    );\n}\n","import React, { useRef, useState } from \"react\";\nimport { styled } from \"@mui/system\";\nimport Typography from \"@mui/material/Typography\";\nimport IconButton from \"@mui/material/IconButton\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport AddIcCallIcon from \"@mui/icons-material/AddIcCall\";\nimport VideoCallIcon from \"@mui/icons-material/VideoCall\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport Avatar from \"../../../../components/Avatar\";\nimport { useAppSelector } from \"../../../../store\";\nimport { callRequest, deleteChat } from \"../../../../socket/socketConnection\"; // Import deleteChat\nimport ChatDropDown from \"./ChatDropDown\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport PersonRemoveIcon from \"@mui/icons-material/PersonRemove\";\n\nconst MainContainer = styled(\"div\")({\n    width: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    position: \"sticky\",\n    top: \"0px\",\n    padding: \"8px 15px\",\n    background: \"linear-gradient(90deg, rgba(255,0,0,1) 0%, rgba(0,255,0,1) 50%, rgba(0,0,255,1) 100%)\",\n    borderRadius: \"0px 0px 20px 20px\",\n    boxShadow: \"0 4px 6px rgba(0,0,0,0.1)\",\n    zIndex: \"20\",\n    color: \"white\",\n    \"@media (max-width: 600px)\": {\n        padding: \"5px 10px\",\n    },\n});\n\nconst DesktopChatDropDown = styled(\"div\")({\n    display: \"block\",\n    \"@media (max-width: 600px)\": {\n        display: \"none\",\n    },\n});\n\nconst CenterSection = styled(\"div\")({\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flex: 1,\n    gap: \"8px\",\n    \"@media (max-width: 600px)\": {\n        flexDirection: \"column\",\n    },\n});\n\nconst StatusText = styled(Typography)({\n    fontSize: \"12px\",\n    color: \"#d3d3d3\",\n    marginTop: \"-2px\",\n});\n\nconst CallButtons = styled(\"div\")({\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"8px\",\n    \"@media (max-width: 600px)\": {\n        display: \"none\",\n    },\n});\n\nconst MessagesHeader: React.FC<{ scrollPosition: number }> = ({ scrollPosition }) => {\n    const navRef = useRef<HTMLDivElement>(null);\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n    const isMobileMenuOpen = Boolean(anchorEl);\n\n    const {\n        auth: { userDetails },\n        chat: { chosenChatDetails },\n        room: { isUserInRoom },\n    } = useAppSelector((state) => state);\n\n    const handleDeleteChat = () => {\n        if (chosenChatDetails && userDetails) {\n            const data = {\n                userId: userDetails._id, // Corrected to use userDetails._id\n                otherUserId: chosenChatDetails.userId,\n            };\n            console.log(\"Attempting to delete chat with data:\", data);\n            deleteChat(data); // Call deleteChat with the necessary data\n        } else {\n            console.error(\"Cannot delete chat: user details or chat details are missing\");\n        }\n    };\n\n    const handleRemoveFriend = () => {\n        console.log(\"Remove friend\");\n    };\n\n    const handleMobileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleMobileMenuClose = () => {\n        setAnchorEl(null);\n    };\n\n    return (\n        <MainContainer ref={navRef}>\n            <DesktopChatDropDown>\n                <ChatDropDown />\n            </DesktopChatDropDown>\n\n            <CenterSection>\n                {chosenChatDetails && (\n                    <>\n                        <Avatar username={chosenChatDetails.username} />\n                        <div style={{ textAlign: \"center\" }}>\n                            <Typography\n                                variant=\"h6\"\n                                sx={{\n                                    color: \"white\",\n                                    fontSize: \"16px\",\n                                }}\n                            >\n                                {chosenChatDetails.username}\n                            </Typography>\n                            <StatusText>\n                                {chosenChatDetails.isOnline ? \"Online\" : \"Offline\"}\n                            </StatusText>\n                        </div>\n                    </>\n                )}\n            </CenterSection>\n\n            <CallButtons>\n                <IconButton\n                    sx={{ color: \"#00acee\", fontSize: \"16px\" }}\n                    disabled={isUserInRoom}\n                    onClick={() =>\n                        callRequest({\n                            audioOnly: true,\n                            callerName: userDetails ? userDetails.username : \"\",\n                            receiverUserId: chosenChatDetails?.userId!,\n                        })\n                    }\n                >\n                    <AddIcCallIcon fontSize=\"small\" />\n                </IconButton>\n\n                <IconButton\n                    sx={{ color: \"#00ff7f\", fontSize: \"16px\" }}\n                    disabled={isUserInRoom}\n                    onClick={() =>\n                        callRequest({\n                            audioOnly: false,\n                            callerName: userDetails ? userDetails.username : \"\",\n                            receiverUserId: chosenChatDetails?.userId!,\n                        })\n                    }\n                >\n                    <VideoCallIcon fontSize=\"small\" />\n                </IconButton>\n\n                <IconButton\n                    sx={{ color: \"red\", fontSize: \"16px\" }}\n                    onClick={handleDeleteChat}\n                >\n                    <DeleteIcon fontSize=\"small\" />\n                </IconButton>\n            </CallButtons>\n\n            <IconButton\n                aria-label=\"mobile menu\"\n                onClick={handleMobileMenuOpen}\n                sx={{ display: { xs: \"flex\", md: \"none\" }, color: \"white\" }}\n            >\n                <MenuIcon />\n            </IconButton>\n\n            <Menu\n                anchorEl={anchorEl}\n                open={isMobileMenuOpen}\n                onClose={handleMobileMenuClose}\n                keepMounted\n                anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n                transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n            >\n                <MenuItem onClick={() => callRequest({ audioOnly: true, callerName: userDetails?.username ?? \"\", receiverUserId: chosenChatDetails?.userId! })}>\n                    <AddIcCallIcon sx={{ color: \"#00acee\", marginRight: \"8px\" }} />\n                    Voice Call\n                </MenuItem>\n                <MenuItem onClick={() => callRequest({ audioOnly: false, callerName: userDetails?.username ?? \"\", receiverUserId: chosenChatDetails?.userId! })}>\n                    <VideoCallIcon sx={{ color: \"#00ff7f\", marginRight: \"8px\" }} />\n                    Video Call\n                </MenuItem>\n                <MenuItem onClick={handleDeleteChat}>\n                    <DeleteIcon sx={{ color: \"red\", marginRight: \"8px\" }} />\n                    Delete Chat\n                </MenuItem>\n                <MenuItem onClick={handleRemoveFriend}>\n                    <PersonRemoveIcon sx={{ color: \"gray\", marginRight: \"8px\" }} />\n                    Remove Friend\n                </MenuItem>\n            </Menu>\n        </MainContainer>\n    );\n};\n\nexport default MessagesHeader;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport Typography from \"@mui/material/Typography\";\nimport Avatar from \"../../../../components/Avatar\";\n\nfunction formatDate(date: Date) {\n    let hours = date.getHours();\n    let minutes: string | number = date.getMinutes();\n    let ampm = hours >= 12 ? \"PM\" : \"AM\";\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n    minutes = minutes < 10 ? \"0\" + minutes : minutes;\n    let strTime = hours + \":\" + minutes + \" \" + ampm;\n\n    return strTime;\n}\n\n\nconst MainContainer = styled(\"div\")({\n    width: \"99%\",\n    display: \"flex\",\n    marginTop: \"10px\",\n});\n\nconst AvatarContainer = styled(\"div\")({\n    width: \"60px\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n});\n\nconst MessageContainer = styled(\"div\")({\n    display: \"flex\",\n    flexDirection: \"column\",\n    maxWidth: \"50%\",\n});\n\n\ninterface MessageProps {\n    content: string;\n    sameAuthor: boolean;\n    username: string;\n    date: string;\n    incomingMessage: boolean;\n}\n\nconst Message = ({ content, sameAuthor, username, date, incomingMessage }: MessageProps) => {\n\n    if (!incomingMessage) {\n        return (\n            <MainContainer>\n                <MessageContainer sx={{ marginLeft: \"auto\" }}>\n                    <div\n                        style={{\n                            color: \"white\",\n                            backgroundColor: \"#5865f2\",\n                            borderRadius: \"13px\",\n                            padding: \"8px 12px\",\n                        }}\n                    >\n                        <Typography\n                            sx={{\n                                fontSize: \"16px\",\n                                color: \"white\",\n                                marginBottom: \"2px\",\n                            }}\n                        >\n                            {content}\n                        </Typography>\n\n                        <Typography\n                            sx={{\n                                color: \"#b9bbbe\",\n                                textAlign: \"right\",\n                                fontSize: \"10px\",\n                            }}\n                        >\n                            {formatDate(new Date(date))}\n                        </Typography>\n                    </div>\n                </MessageContainer>\n            </MainContainer>\n        );\n    }\n\n\n    return (\n        <MainContainer>\n            {!sameAuthor && (\n                <AvatarContainer>\n                    <Avatar username={username} />\n                </AvatarContainer>\n            )}\n\n            <MessageContainer\n                sx={{\n                    marginLeft: sameAuthor ? \"60px\" : \"0px\",\n                    backgroundColor: \"#fafafa\",\n                    borderRadius: \"13px\",\n                    padding: \"8px 12px\",\n                }}\n            >\n                <Typography\n                    sx={{\n                        fontSize: \"16px\",\n                        color: \"black\",\n                        marginBottom: \"2px\",\n                    }}\n                >\n                    {content}\n                </Typography>\n\n                <Typography\n                    sx={{\n                        color: \"#7f8183\",\n                        fontSize: \"10px\",\n                    }}\n                >\n                    {formatDate(new Date(date))}\n                </Typography>\n            </MessageContainer>\n        </MainContainer>\n    );\n};\n\nexport default Message;","import React from \"react\";\nimport { styled } from \"@mui/system\";\n\nconst Separator = styled(\"div\")({\n    width: \"95%\",\n    backgroundColor: \"#b9bbbe\",\n    height: \"1px\",\n    position: \"relative\",\n    marginTop: \"20px\",\n    marginBottom: \"15px\",\n});\n\nconst DateLabel = styled(\"span\")({\n    backgroundColor: \"#36393f\",\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    color: \"#b9bbbe\",\n    padding: \"0 5px\",\n    fontSize: \"14px\",\n});\n\nconst DateSeparator = ({ date }: {date: string}) => {\n    return (\n        <Separator>\n            <DateLabel>{new Date(date).toDateString()}</DateLabel>\n        </Separator>\n    );\n};\n\nexport default DateSeparator;\n","import React, { useState, useEffect, useRef }  from \"react\";\nimport { styled } from \"@mui/system\";\nimport MessagesHeader from \"./Header\";\n// import DUMMY_MESSAGES from \"./DUMMY_MESSAGES\";\nimport Message from \"./Message\";\nimport { useAppSelector } from \"../../../../store\";\nimport { fetchDirectChatHistory, fetchGroupChatHistory } from \"../../../../socket/socketConnection\";\nimport { Message as MessageType } from \"../../../../actions/types\";\nimport DateSeparator from \"./DateSeparator\";\nimport { Typography } from \"@mui/material\";\n\n\nconst MainContainer = styled(\"div\")({\n    height: \"calc(100% - 142px)\",\n    overflow: \"auto\",\n    overflowX: \"hidden\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n});\n\n\nconst Messages = () => {\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n    const [scrollPosition, setScrollPosition] = useState(0);\n    const {chat, auth: {userDetails}} = useAppSelector((state) => state);\n\n    const { chosenChatDetails, messages, chosenGroupChatDetails } = chat;\n\n    const sameAuthor = (message: MessageType, index: number) => {\n\n        if (index === 0) {\n            return false;\n        }\n        return message.author._id === messages[index - 1].author._id;\n    }\n\n    const scrollToBottom = () => {\n        if (messagesEndRef.current) {\n            messagesEndRef?.current.scrollIntoView({ behavior: \"smooth\" });\n        }\n    };\n\n    const handleScroll = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\n        setScrollPosition(e.currentTarget.scrollTop);\n    };\n    \n    useEffect(() => {\n        if (chosenChatDetails) {\n            fetchDirectChatHistory({\n                receiverUserId: chosenChatDetails.userId,\n            });\n        }\n\n        if(chosenGroupChatDetails) {\n            fetchGroupChatHistory({\n                groupChatId: chosenGroupChatDetails.groupId\n            })\n        }\n    }, [chosenChatDetails, chosenGroupChatDetails]);\n\n\n    useEffect(() => {\n        scrollToBottom();\n    }, [messages]);\n\n\n    return (\n        <MainContainer onScroll={handleScroll}>\n            <MessagesHeader scrollPosition={scrollPosition} />\n\n            <Typography\n                sx={{\n                    color: \"#b9bbbe\",\n                    marginTop: \"15px\",\n                    fontSize: \"13px\",\n                }}\n            >\n                {chat.chosenChatDetails?.userId\n                    ? `This is the beginning of your conversation with ${chat.chosenChatDetails?.username}`\n                    : \"This is the beginning of the conversation with your friends!\"}\n            </Typography>\n\n            {messages.map((message, index) => {\n                const thisMessageDate = new Date(\n                    message.createdAt\n                ).toDateString();\n                const prevMessageDate =\n                    index > 0 &&\n                    new Date(messages[index - 1]?.createdAt).toDateString();\n\n                const isSameDay =\n                    index > 0 ? thisMessageDate === prevMessageDate : true;\n\n                const incomingMessage =\n                    message.author._id !== (userDetails as any)._id;\n\n                return (\n                    <div key={message._id} style={{ width: \"97%\" }}>\n                        {(!isSameDay || index === 0) && (\n                            <DateSeparator date={message.createdAt} />\n                        )}\n\n                        <Message\n                            content={message.content}\n                            username={message.author.username}\n                            sameAuthor={sameAuthor(message, index)}\n                            date={message.createdAt}\n                            incomingMessage={incomingMessage}\n                        />\n                    </div>\n                );\n            })}\n            <div ref={messagesEndRef} />\n        </MainContainer>\n    );\n};\n\nexport default Messages;","import React, { useState, useEffect, Suspense } from \"react\";\nimport { styled } from \"@mui/system\";\nimport { useAppSelector } from \"../../../store\";\nimport { notifyTyping, sendDirectMessage, sendGroupMessage } from \"../../../socket/socketConnection\";\nimport IconButton from \"@mui/material/IconButton\";\nimport SendIcon from \"@mui/icons-material/Send\";\nimport InsertEmoticonIcon from \"@mui/icons-material/InsertEmoticon\";\n// Use dynamic import with Suspense for emoji picker\nconst Picker = React.lazy(() => import(\"emoji-mart\").then(module => ({ default: module.Picker })));\n\nconst MainContainer = styled(\"div\")({\n    height: \"60px\",\n    width: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: \"0 10px\",\n    position: \"relative\",\n});\n\nconst Input = styled(\"input\")({\n    backgroundColor: \"#2f3136\",\n    width: \"100%\",\n    height: \"44px\",\n    color: \"white\",\n    border: \"none\",\n    borderRadius: \"8px\",\n    fontSize: \"14px\",\n    padding: \"0 10px\",\n    outline: \"none\",\n});\n\nconst SendButton = styled(IconButton)({\n    color: \"white\",\n    padding: \"8px\",\n});\n\nconst EmojiPickerContainer = styled(\"div\")({\n    position: \"absolute\",\n    bottom: \"60px\",\n    right: \"10px\",\n    zIndex: 1000,\n});\n\nconst NewMessageInput: React.FC = () => {\n    const [message, setMessage] = useState(\"\");\n    const [focused, setFocused] = useState(false);\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n\n    const onFocus = () => setFocused(true);\n    const onBlur = () => setFocused(false);\n\n    const { chosenChatDetails, chosenGroupChatDetails } = useAppSelector((state) => state.chat);\n\n    const handleSendMessage = () => {\n        if (message.trim() === \"\") return;\n\n        if (chosenChatDetails) {\n            sendDirectMessage({\n                message,\n                receiverUserId: chosenChatDetails.userId!,\n            });\n        }\n\n        if (chosenGroupChatDetails) {\n            sendGroupMessage({\n                message,\n                groupChatId: chosenGroupChatDetails.groupId,\n            });\n        }\n\n        setMessage(\"\");\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n        if (e.key === \"Enter\") {\n            handleSendMessage();\n        }\n    };\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setMessage(e.target.value);\n    };\n\n    const handleEmojiSelect = (emoji: any) => {\n        setMessage((prev) => prev + emoji.native);\n        setShowEmojiPicker(false);\n    };\n\n    useEffect(() => {\n        if (chosenChatDetails?.userId) {\n            notifyTyping({\n                receiverUserId: chosenChatDetails.userId!,\n                typing: focused && message.length > 0,\n            });\n        }\n    }, [focused, message, chosenChatDetails?.userId]);\n\n    return (\n        <MainContainer>\n            <IconButton onClick={() => setShowEmojiPicker((prev) => !prev)}>\n                <InsertEmoticonIcon sx={{ color: \"white\" }} />\n            </IconButton>\n\n            <Input\n                placeholder={\n                    chosenChatDetails\n                        ? `Write message to ${chosenChatDetails.username}`\n                        : chosenGroupChatDetails\n                        ? `Write message in ${chosenGroupChatDetails.groupName}`\n                        : \"Your message...\"\n                }\n                value={message}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                onFocus={onFocus}\n                onBlur={onBlur}\n            />\n\n            <SendButton onClick={handleSendMessage} disabled={!message.trim()}>\n                <SendIcon />\n            </SendButton>\n\n            {showEmojiPicker && (\n                <EmojiPickerContainer>\n                    <Suspense fallback={<div>Loading...</div>}>\n                        <Picker set=\"apple\" onSelect={handleEmojiSelect} />\n                    </Suspense>\n                </EmojiPickerContainer>\n            )}\n        </MainContainer>\n    );\n};\n\nexport default NewMessageInput;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport gif from \"./dots.gif\";\nimport { useAppSelector } from \"../../../store\";\nimport Avatar from \"../../../components/Avatar\";\n\nconst GifContainer = styled(\"div\")({\n    display: \"flex\",\n    alignItems: \"center\",\n    height: \"82px\",\n    width: \"82px\",\n    marginLeft: \"10px\",\n});\n\nconst Typing = () => {\n    const {chosenChatDetails, typing} = useAppSelector(state => state.chat);\n\n    const isTyping = typing.find((item) => item.userId === chosenChatDetails?.userId)\n    \n    return (\n        <GifContainer>\n            {(isTyping && isTyping.typing) && (\n                <>\n                    <Avatar username={chosenChatDetails?.username!} />\n                    <img\n                        src={gif}\n                        alt=\"dots\"\n                        style={{\n                            height: \"50%\",\n                            width: \"50%\",\n                            marginLeft: \"3px\",\n                        }}\n                    />\n                </>\n            )}\n        </GifContainer>\n    );\n};\n\nexport default Typing;\n","export default \"data:image/gif;base64,R0lGODlh6gDBAPUgAISGhvz8/M/Pz+Xl5fLy8uzs7N/f39LS0vX19fn5+ff399XV1YuNjeDh4e/v78HCwqKkpOLi4rKzs+np6dzc3JOVlejo6Kqrq9HR0djZ2ZucnPDw8Lq7u8nKytnZ2czMzP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzFEMDA4MThBRUY3MTFFNkIzQUZFNzI0NEI4NkE3RUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzFEMDA4MTlBRUY3MTFFNkIzQUZFNzI0NEI4NkE3RUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQjhBQkM3RkFFRjIxMUU2QjNBRkU3MjQ0Qjg2QTdFQiIg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\"","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport Messages from \"./Messages\";\nimport NewMessageInput from \"./NewMessageInput\";\nimport Typing from \"./Typing\";\n\nconst Wrapper = styled(\"div\")({\n    flexGrow: 1,\n});\n\n\nconst ChatDetails = () => {\n    \n    return (\n        <Wrapper>\n            <Messages />\n            <Typing/>\n            <NewMessageInput />\n        </Wrapper>\n    );\n};\n\nexport default ChatDetails","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport { useAppSelector } from \"../../../store\";\nimport WelcomeMessage from \"./WelcomeMessage\";\nimport ChatDetails from \"./ChatDetails\";\n\nconst MainContainer = styled(\"div\")({\n  flexGrow: 1,\n  backgroundColor: \"#36393f\",\n  display: \"flex\",\n});\n\nconst Messenger = () => {\n  const { chosenChatDetails, chosenGroupChatDetails } = useAppSelector((state) => state.chat);\n\n  return <MainContainer>\n    {chosenChatDetails?.userId || chosenGroupChatDetails?.groupId ?  <ChatDetails/> : <WelcomeMessage/>}\n  </MainContainer>;\n};\n\nexport default Messenger;\n","export const validateLoginForm = ({\n    email,\n    password\n}: {\n    email: string;\n    password: string;\n}) => {\n    const errors: { [key: string]: string } = {}; // Initialize an empty errors object\n\n    if (!validateMail(email)) {\n        errors.email = \"Invalid email address.\";\n    }\n    if (!validatePassword(password)) {\n        errors.password = \"Password must be at least 6 characters.\";\n    }\n\n    return errors; // Return the errors object\n};\n\nexport const validateRegisterForm = ({\n    email,\n    password,\n    username,\n}: {\n    email: string;\n    password: string;\n    username: string;\n}) => {\n    const errors: { [key: string]: string } = {}; // Initialize an empty errors object\n\n    if (!validateMail(email)) {\n        errors.email = \"Invalid email address.\";\n    }\n    if (!validatePassword(password)) {\n        errors.password = \"Password must be at least 6 characters.\";\n    }\n    if (!validateUsername(username)) {\n        errors.username = \"Username must be between 3 and 12 characters.\";\n    }\n\n    return errors; // Return the errors object\n};\n\n// Validation functions remain unchanged\nconst validatePassword = (password: string) => {\n    return password.length > 5;\n};\n\nexport const validateMail = (email: string) => {\n    const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n    return emailPattern.test(email);\n};\n\nconst validateUsername = (username: string) => {\n    return username.length > 2 && username.length < 13;\n};\n\nexport const validateGroupName = (name: string) => {\n    return name.length > 2 && name.length < 13;\n};\n","import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport Typography from \"@mui/material/Typography\";\nimport { validateMail } from \"../../../utils/validators\";\nimport { Button } from \"@mui/material\";\nimport styled from \"@emotion/styled\";\nimport { inviteFriend } from \"../../../actions/friendActions\";\n\nconst Wrapper = styled(\"div\")({\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    width: \"100%\",\n});\n\nconst Label = styled(\"p\")({\n    color: \"#b9bbbe\",\n    textTransform: \"uppercase\",\n    fontWeight: \"600\",\n    fontSize: \"16px\",\n});\n\nconst Input = styled(\"input\")({\n    flexGrow: 1,\n    height: \"40px\",\n    border: \"1px solid black\",\n    borderRadius: \"5px\",\n    color: \"#dcddde\",\n    background: \"#35393f\",\n    margin: 0,\n    fontSize: \"16px\",\n    padding: \"0 5px\",\n    outline: \"none\",\n});\n\n\ninterface AddFriendDialogProps {\n    isDialogOpen: boolean;\n    closeDialogHandler: () => void;\n}\n\nconst AddFriendDialog = ({\n    isDialogOpen,\n    closeDialogHandler,\n}: AddFriendDialogProps) => {\n    const [email, setEmail] = useState(\"\");\n    const [isFormValid, setIsFormValid] = useState(false);\n\n    const dispatch = useDispatch();\n\n    const handleCloseDialog = () => {\n        closeDialogHandler();\n        setEmail(\"\");\n    };\n\n    const handleClick = () => {\n        dispatch(inviteFriend(email, handleCloseDialog));\n    }\n\n    useEffect(() => {\n        setIsFormValid(validateMail(email));\n    }, [email, setIsFormValid]);\n\n    return (\n        <div>\n            <Dialog open={isDialogOpen} onClose={handleCloseDialog}>\n                <DialogTitle>\n                    <Typography>Invite a Friend</Typography>\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        <Typography>\n                            Enter email address of friend which you would like\n                            to invite\n                        </Typography>\n                    </DialogContentText>\n\n                    <Wrapper>\n                        <Label>Invite your friend</Label>\n                        <Input\n                            type=\"email\"\n                            placeholder=\"Enter email of your friend\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                        />\n                    </Wrapper>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        sx={{\n                            bgcolor: \"#5865F2\",\n                            color: \"white\",\n                            textTransform: \"none\",\n                            fontSize: \"16px\",\n                            fontWeight: 500,\n                            width: \"100%\",\n                            height: \"40px\",\n                            marginLeft: \"15px\",\n                            marginRight: \"15px\",\n                            marginBottom: \"10px\",\n                        }}\n                        disabled={!isFormValid}\n                        onClick={handleClick}\n                    >\n                        Invite\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default AddFriendDialog;\n","import React, { useState } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport AddFriendDialog from \"./AddFriendDialog\";\n\nconst AddFriendButton = () => {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n\n  const handleOpenAddFriendDialog = () => {\n    setIsDialogOpen(true);\n  };\n\n  const handleCloseAddFriendDialog = () => {\n    setIsDialogOpen(false);\n  };\n\n  return (\n      <>\n          <Button\n              variant=\"contained\"\n              sx={{\n                  bgcolor: \"#5865F2\",\n                  color: \"white\",\n                  textTransform: \"none\",\n                  fontSize: \"16px\",\n                  fontWeight: 500,\n                  // margin: \"20px 0px\",\n                  // marginTop: \"10px\",\n                  // marginLeft: \"10px\",\n                  width: \"120px\",\n                  height: \"30px\",\n                  background: \"#3ba55d\",\n                  // zIndex: 100,\n                  // position: \"absolute\",\n                  // top: \"0\",\n                  left: \"0\",\n              }}\n              onClick={handleOpenAddFriendDialog}\n          >\n              Add friend\n          </Button>\n          <AddFriendDialog\n              isDialogOpen={isDialogOpen}\n              closeDialogHandler={handleCloseAddFriendDialog}\n          />\n      </>\n  );\n};\n\nexport default AddFriendButton;\n","import React from \"react\";\nimport { Box } from \"@mui/material\";\nimport FiberManualRecordIcon from \"@mui/icons-material/FiberManualRecord\";\n\ninterface OnlineIndicatorProps {\n  isOnline: boolean; \n}\n\nconst OnlineIndicator: React.FC<OnlineIndicatorProps> = ({ isOnline }) => {\n  return (\n    <Box\n      sx={{\n        color: isOnline ? \"#3ba55d\" : \"#c0c0c0\", \n        display: \"flex\",\n        alignItems: \"center\",\n        position: \"absolute\",\n        right: \"5px\",\n      }}\n      aria-label={isOnline ? \"Online\" : \"Offline\"}\n    >\n      <FiberManualRecordIcon />\n    </Box>\n  );\n};\n\nexport default OnlineIndicator;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Button from \"@mui/material/Button\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { useTheme } from \"@mui/material/styles\";\nimport { Tooltip } from \"@mui/material\";\nimport Typography from \"@mui/material/Typography\";\nimport OnlineIndicator from \"./OnlineIndicator\";\nimport Avatar from \"../../../../components/Avatar\";\nimport { setChosenChatDetails } from \"../../../../actions/chatActions\";\nimport { useAppSelector } from \"../../../../store\";\n\ninterface FriendsListItemProps {\n    id: string;\n    username: string;\n    email: string;\n    isOnline: boolean; \n    onSelectFriend: () => void; \n}\n\nconst FriendsListItem: React.FC<FriendsListItemProps> = ({\n    id,\n    username,\n    isOnline,\n    email,\n    onSelectFriend,\n}) => {\n    const theme = useTheme();\n    const matches = useMediaQuery(theme.breakpoints.up(\"sm\"));\n    const dispatch = useDispatch();\n\n    const { chosenChatDetails, typing } = useAppSelector((state) => state.chat);\n    const isTyping = typing.find((item) => item.userId === id);\n    const isFriendTyping = isTyping && isTyping.typing && id !== chosenChatDetails?.userId;\n    const isChatActive = chosenChatDetails?.userId === id;\n\n    return (\n        <Tooltip title={email}>\n            <Button\n                onClick={onSelectFriend} \n                style={{\n                    width: \"100%\",\n                    height: \"42px\",\n                    marginTop: \"15px\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"flex-start\",\n                    textTransform: \"none\",\n                    color: \"black\",\n                    position: \"relative\",\n                    backgroundColor: isChatActive ? \"#36393f\" : \"transparent\",\n                }}\n            >\n                {matches && <Avatar username={username} />}\n                <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"flex-start\", justifyContent: \"center\" }}>\n                    <Typography style={{ marginLeft: \"7px\", fontWeight: 700, color: \"#8e9297\" }} variant=\"subtitle1\" align=\"left\">\n                        {username}\n                    </Typography>\n                    {isFriendTyping && (\n                        <Typography style={{ marginLeft: \"7px\", fontWeight: 500, fontSize: \"15px\", color: \"#3ba55d\" }} variant=\"subtitle1\" align=\"left\">\n                            typing.....\n                        </Typography>\n                    )}\n                </div>\n                {isOnline && <OnlineIndicator isOnline={isOnline} />}\n            </Button>\n        </Tooltip>\n    );\n};\n\nexport default FriendsListItem;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport FriendsListItem from \"./FriendsListItem\";\nimport { useAppSelector } from \"../../../../store\";\nimport { useDispatch } from \"react-redux\";\nimport { setChosenChatDetails } from \"../../../../actions/chatActions\"; \nimport { Friend } from \"../../../../actions/types\"; \n\nconst MainContainer = styled(\"div\")({\n    flexGrow: 1,\n    width: \"100%\",\n    margin: \"20px 0\"\n});\n\nconst FriendsList: React.FC = () => {\n    const dispatch = useDispatch();\n    const { friends, onlineUsers } = useAppSelector(state => state.friends);\n\n    const modifiedFriends: Friend[] = friends.map(friend => {\n        const isOnline = onlineUsers.find(user => user.userId === friend.id);\n        return { ...friend, isOnline: !!isOnline }; \n    });\n\n    const handleSelectFriend = (friend: Friend) => {\n        dispatch(setChosenChatDetails({\n            userId: friend.id,\n            username: friend.username,\n            isOnline: friend.isOnline || false \n        }));\n    };\n\n    return (\n        <MainContainer>\n            {modifiedFriends.map((f) => (\n                <FriendsListItem\n                    username={f.username}\n                    id={f.id}\n                    key={f.id}\n                    isOnline={f.isOnline || false} \n                    email={f.email}\n                    onSelectFriend={() => handleSelectFriend(f)} \n                />\n            ))}\n        </MainContainer>\n    );\n};\n\nexport default FriendsList;\n","import React from \"react\";\nimport { Typography } from \"@mui/material\";\nimport InboxIcon from \"@mui/icons-material/MoveToInbox\";\nimport MailIcon from \"@mui/icons-material/Mail\";\nimport GroupsIcon from \"@mui/icons-material/Groups\";\n\nconst FriendsTitle = ({ title }: { title: string }) => {\n    return (\n        <Typography\n            sx={{\n                textTransform: \"uppercase\",\n                color: \"#8e9297\",\n                fontSize: \"14px\",\n                marginTop: \"20px\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"10px\",\n            }}\n        >\n            {title === \"Private Messages\" ? (\n                <MailIcon />\n            ) : title === \"Group Chats\" ? (\n                <GroupsIcon />\n            ) : title === \"Active Rooms\" ? (\n                <GroupsIcon />\n            ) : (\n                <InboxIcon />\n            )}\n            {title}\n        </Typography>\n    );\n};\n\nexport default FriendsTitle;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport CheckIcon from \"@mui/icons-material/Check\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport Box from \"@mui/material/Box\";\nimport IconButton from \"@mui/material/IconButton\";\nimport { rejectInvitation, acceptInvitation } from \"../../../../actions/friendActions\";\n\n\n\nconst InvitationDecisionButtons = ({color, invitationId} : {color? : string, invitationId: string}) => {\n  const dispatch = useDispatch();\n  \n  return (\n      <Box sx={{ display: \"flex\" }}>\n          <IconButton\n              style={{ color: color ? color : \"white\" }}\n              onClick={() => {\n                  dispatch(acceptInvitation(invitationId));\n              }}\n          >\n              <CheckIcon />\n          </IconButton>\n          <IconButton\n              style={{ color: color ? color : \"white\" }}\n              onClick={() => {\n                  dispatch(rejectInvitation(invitationId));\n              }}\n          >\n              <ClearIcon />\n          </IconButton>\n      </Box>\n  );\n};\n\nexport default InvitationDecisionButtons;\n","import React from \"react\";\nimport { Tooltip, Typography, Box } from \"@mui/material\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { useTheme } from \"@mui/material/styles\";\nimport InvitationDecisionButtons from \"./InvitationDecisionButtons\";\nimport Avatar from \"../../../../components/Avatar\";\nimport PendingInvitationListItemSmall from \"./PendingInvitationListItemSmall\";\n\n\ninterface FriendsListItemProps {\n  id: string;\n  username: string;\n  email: string;\n}\n\nconst PendingInvitationsListItem = ({\n  id,\n  username,\n  email,\n}: FriendsListItemProps) => {\n\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up(\"sm\"));\n\n\n  return (\n      <Tooltip title={email}>\n          <div style={{ width: \"100%\" }}>\n              <Box\n                  sx={{\n                      width: \"100%\",\n                      height: \"42px\",\n                      marginTop: \"10px\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"space-between\",\n                  }}\n              >\n                  <Avatar username={username} />\n                  <Typography\n                      sx={{\n                          marginLeft: \"7px\",\n                          fontWeight: 700,\n                          color: \"#8e9297\",\n                          flexGrow: 1,\n                      }}\n                  >\n                      {username}\n                  </Typography>\n                  <InvitationDecisionButtons invitationId={id} />\n              </Box>\n          </div>\n      </Tooltip>\n  );\n\n//    if (matches ) {\n//      return (\n//          <Tooltip title={email}>\n//              <div style={{ width: \"100%\" }}>\n//                  <Box\n//                      sx={{\n//                          width: \"100%\",\n//                          height: \"42px\",\n//                          marginTop: \"10px\",\n//                          display: \"flex\",\n//                          alignItems: \"center\",\n//                          justifyContent: \"space-between\",\n//                      }}\n//                  >\n//                      <Avatar username={username} />\n//                      <Typography\n//                          sx={{\n//                              marginLeft: \"7px\",\n//                              fontWeight: 700,\n//                              color: \"#8e9297\",\n//                              flexGrow: 1,\n//                          }}\n//                          variant=\"subtitle1\"\n//                      >\n//                          {username}\n//                      </Typography>\n//                      <InvitationDecisionButtons invitationId={id}/>\n//                  </Box>\n//              </div>\n//          </Tooltip>\n//      );\n//    } else {\n//        return <PendingInvitationListItemSmall username={username} invitationId={id}/>;\n//    }\n};\n\nexport default PendingInvitationsListItem;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport PendingInvitationsListItem from \"./PendingInvitationsListItem\";\nimport { useAppSelector } from \"../../../../store\";\n\nconst DUMMY_INVITATIONS = [\n    {\n        _id: \"1\",\n        senderId: {\n            username: \"Mark\",\n            email: \"dummy@ad.com\",\n        },\n    },\n    {\n        _id: \"2\",\n        senderId: {\n            username: \"John\",\n            email: \"John@ad.com\",\n        },\n    },\n    {\n        _id: \"3\",\n        senderId: {\n            username: \"Stephen\",\n            email: \"stephen@ad.com\",\n        },\n    },\n    {\n        _id: \"4\",\n        senderId: {\n            username: \"Colt\",\n            email: \"colt@ad.com\",\n        },\n    },\n    {\n        _id: \"5\",\n        senderId: {\n            username: \"Andrew\",\n            email: \"andrew@ad.com\",\n        },\n    },\n];\n\nconst MainContainer = styled(\"div\")({\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    margin: \"10px 0\",\n});\n\nconst PendingInvitationsList = () => {\n  const { pendingInvitations } = useAppSelector((state) => state.friends);\n\n  return (\n    <MainContainer>\n      {pendingInvitations.map((invitation) => (\n        <PendingInvitationsListItem\n          key={invitation._id}\n          id={invitation._id}\n          username={invitation.senderId.username}\n          email={invitation.senderId.email}\n        />\n      ))}\n    </MainContainer>\n  );\n};\n\nexport default PendingInvitationsList;\n","import React, { Fragment } from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Divider from \"@mui/material/Divider\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport Typography from \"@mui/material/Typography\";\nimport { ActiveRoom } from \"../../../actions/types\";\nimport Avatar from \"../../../components/Avatar\";\n\n\n\ninterface Props {\n    isDialogOpen: boolean;\n    closeDialogHandler: () => void;\n    roomDetails: ActiveRoom;\n    currentUserId: string;\n}\n\nconst RoomParticipantsDialog = ({\n    isDialogOpen,\n    closeDialogHandler,\n    roomDetails,\n    currentUserId,\n}: Props) => {\n    const handleCloseDialog = () => {\n        closeDialogHandler();\n    };\n\n    return (\n        <div>\n            <Dialog open={isDialogOpen} onClose={handleCloseDialog}>\n                <DialogTitle>\n                    <Typography>{`${roomDetails.roomCreator.username}'s Room`}</Typography>\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        <Typography>\n                            {roomDetails.participants.length}{\" \"}\n                            {roomDetails.participants.length > 1\n                                ? \"Participants\"\n                                : \"Participant\"}\n                        </Typography>\n                    </DialogContentText>\n                    <List\n                        sx={{\n                            width: \"100%\",\n                            maxWidth: 300,\n                            bgcolor: \"background.paper\",\n                        }}\n                    >\n                        {roomDetails.participants.map((participant) => {\n                            return (\n                                <Fragment key={participant.userId}>\n                                    <ListItem alignItems=\"flex-start\">\n                                        <ListItemAvatar>\n                                            <Avatar\n                                                username={participant.username}\n                                            />\n                                        </ListItemAvatar>\n                                        <ListItemText\n                                            primary={`${participant.username} ${\n                                                participant.userId ===\n                                                currentUserId\n                                                    ? \"(You)\"\n                                                    : \"\"\n                                            }`}\n                                            secondary={\n                                                <React.Fragment>\n                                                    <Typography\n                                                        sx={{\n                                                            display: \"inline\",\n                                                        }}\n                                                        component=\"span\"\n                                                        variant=\"body2\"\n                                                        color=\"text.primary\"\n                                                    >\n                                                        {` ${\n                                                            participant.userId ===\n                                                            roomDetails\n                                                                .roomCreator\n                                                                ?.userId\n                                                                ? \"  Host\"\n                                                                : \"\"\n                                                        }`}\n                                                    </Typography>\n                                                </React.Fragment>\n                                            }\n                                        />\n                                    </ListItem>\n                                    <Divider variant=\"inset\" component=\"li\" />\n                                </Fragment>\n                            );\n                        })}\n                    </List>\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default RoomParticipantsDialog;\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Switch from '@mui/material/Switch';\nimport { IconButton } from '@mui/material';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport { logoutUser } from '../../../actions/authActions';\nimport { useAppSelector } from '../../../store';\nimport { setAudioOnlyRoom } from '../../../actions/roomActions';\nimport RoomParticipantsDialog from './RoomParticipantsDialog';\nimport {\n  askPermission,\n  subscribeUserToPush,\n  unsubscribeUserToPush,\n} from '../../../notifications';\n\nexport default function DropDownMenu() {\n  const [checked, setChecked] = React.useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const open = Boolean(anchorEl);\n  const dispatch = useDispatch();\n  const {\n    auth: { userDetails },\n    room: { audioOnly, roomDetails, isUserInRoom },\n  } = useAppSelector((state) => state);\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleClick = () => {\n    dispatch(logoutUser());\n  };\n\n  const handleAudioOnlyChange = () => {\n    dispatch(setAudioOnlyRoom(!audioOnly));\n  };\n\n  const handleOpenDialog = () => {\n    setIsDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n  };\n\n  const handleToggle = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    checked: boolean\n  ) => {\n    // If the user has checked the notification\n    if (event.target.checked) {\n      // Ask for permission for notifications\n      askPermission().then((result) => {\n        // if the user has granted permission to notifications, subscribe the user to push notifications\n        if (result) {\n          subscribeUserToPush(() => {\n            setChecked(true);\n          });\n        } else {\n          // if the user has denied permission to notifications, ask the user to enable notifications from the browser settings\n          alert(\n            \"Can't turn on the notifications. First enable notifications from the browser settings and then try again!\"\n          );\n        }\n      });\n    } else {\n      unsubscribeUserToPush(() => {\n        setChecked(false);\n      });\n    }\n  };\n\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready.then(function (registration) {\n        registration.pushManager\n          .getSubscription()\n          .then(function (existingSubscription) {\n            // if both the user has granted permission to notifications and the user has an existing subscription\n            // set the checked state to true, else set it to false\n            if (\n              Notification.permission === 'granted' &&\n              existingSubscription\n            ) {\n              setChecked(true);\n            } else {\n              setChecked(false);\n            }\n          });\n      });\n    } else {\n      console.warn('Service Worker is not supported in this environment.');\n      setChecked(false); // or any default value you prefer\n    }\n  }, []);\n\n  return (\n    <div>\n      <IconButton\n        onClick={(e) => setAnchorEl(e.currentTarget)}\n        style={{ color: 'white', marginLeft: '20px' }}\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        id=\"basic-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleMenuClose}\n        MenuListProps={{\n          'aria-labelledby': 'basic-button',\n        }}\n      >\n        <MenuItem onClick={handleAudioOnlyChange}>\n          {audioOnly\n            ? 'Audio Only Enabled (for Rooms)'\n            : 'Audio Only Disabled (for Rooms)'}\n        </MenuItem>\n        {isUserInRoom && roomDetails && (\n          <MenuItem onClick={handleOpenDialog}>\n            Active Room ({roomDetails.roomCreator.username})\n          </MenuItem>\n        )}\n\n        <MenuItem>\n          Notifications{' '}\n          <Switch checked={checked} onChange={handleToggle} />\n        </MenuItem>\n        <MenuItem onClick={handleClick}>\n          Logout ({userDetails?.username})\n        </MenuItem>\n      </Menu>\n\n      {roomDetails && userDetails && (\n        <RoomParticipantsDialog\n          isDialogOpen={isDialogOpen}\n          closeDialogHandler={handleCloseDialog}\n          roomDetails={roomDetails}\n          currentUserId={userDetails._id}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport { createNewRoom } from \"../../../socket/roomHandler\";\n\nconst CreateRoomButton = ({ isUserInRoom }: { isUserInRoom: boolean }) => {\n    const createNewRoomHandler = () => {\n        createNewRoom();\n    };\n\n    return (\n        <Button\n            disabled={isUserInRoom}\n            onClick={createNewRoomHandler}\n            style={{\n                width: \"48px\",\n                height: \"48px\",\n                borderRadius: \"16px\",\n                margin: 0,\n                padding: 0,\n                minWidth: 0,\n                marginTop: \"10px\",\n                color: \"white\",\n                backgroundColor: \"#5865F2\",\n            }}\n        >\n            <AddIcon />\n        </Button>\n    );\n};\n\nexport default CreateRoomButton;\n","import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport Typography from \"@mui/material/Typography\";\nimport { validateGroupName } from \"../../../utils/validators\";\nimport { Button } from \"@mui/material\";\nimport styled from \"@emotion/styled\";\nimport { createGroupChatAction } from \"../../../actions/groupChatActions\";\n\nconst Wrapper = styled(\"div\")({\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    width: \"100%\",\n});\n\nconst Label = styled(\"p\")({\n    color: \"#b9bbbe\",\n    textTransform: \"uppercase\",\n    fontWeight: \"600\",\n    fontSize: \"16px\",\n});\n\nconst Input = styled(\"input\")({\n    flexGrow: 1,\n    height: \"40px\",\n    border: \"1px solid black\",\n    borderRadius: \"5px\",\n    color: \"#dcddde\",\n    background: \"#35393f\",\n    margin: 0,\n    fontSize: \"16px\",\n    padding: \"0 5px\",\n    outline: \"none\",\n});\n\ninterface CreateGroupChatDialogProps {\n    isDialogOpen: boolean;\n    closeDialogHandler: () => void;\n}\n\nconst CreateGroupChatDialog = ({\n    isDialogOpen,\n    closeDialogHandler,\n}: CreateGroupChatDialogProps) => {\n    const [name, setName] = useState(\"\");\n    const [isFormValid, setIsFormValid] = useState(false);\n\n    const dispatch = useDispatch();\n\n    const handleCloseDialog = () => {\n        closeDialogHandler();\n        setName(\"\");\n    };\n\n    const handleClick = () => {\n        dispatch(createGroupChatAction(name, handleCloseDialog));\n    };\n\n    useEffect(() => {\n        setIsFormValid(validateGroupName(name));\n    }, [name, setIsFormValid]);\n\n    return (\n        <div>\n            <Dialog open={isDialogOpen} onClose={handleCloseDialog}>\n                <DialogTitle>\n                    <Typography>Create a Group Chat</Typography>\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        <Typography>\n                            Enter name of the group\n                        </Typography>\n                    </DialogContentText>\n\n                    <Wrapper>\n                        <Label>Create a Group</Label>\n                        <Input\n                            type=\"name\"\n                            placeholder=\"Enter a group name.\"\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                        />\n                    </Wrapper>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        sx={{\n                            bgcolor: \"#5865F2\",\n                            color: \"white\",\n                            textTransform: \"none\",\n                            fontSize: \"16px\",\n                            fontWeight: 500,\n                            width: \"100%\",\n                            height: \"40px\",\n                            marginLeft: \"15px\",\n                            marginRight: \"15px\",\n                            marginBottom: \"10px\",\n                        }}\n                        disabled={!isFormValid}\n                        onClick={handleClick}\n                    >\n                        Create\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default CreateGroupChatDialog;\n","import React, { useState } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport CreateGroupChatDialog from \"./CreateGroupChatDialog\";\n// import AddIcon from \"@mui/icons-material/Add\";\nimport GroupAddIcon from \"@mui/icons-material/GroupAdd\";\n\nconst CreateGroupChatButton = () => {\n    const [isDialogOpen, setIsDialogOpen] = useState(false);\n\n    const handleOpenGroupChatDialog = () => {\n        setIsDialogOpen(true);\n    };\n\n    const handleCloseGroupChatDialog = () => {\n        setIsDialogOpen(false);\n    };\n\n    return (\n        <>\n            <Button\n                variant=\"contained\"\n                onClick={handleOpenGroupChatDialog}\n                style={{\n                    width: \"48px\",\n                    height: \"48px\",\n                    borderRadius: \"16px\",\n                    margin: 0,\n                    padding: 0,\n                    minWidth: 0,\n                    color: \"white\",\n                    backgroundColor: \"#5865F2\",\n                }}\n            >\n                <GroupAddIcon />\n            </Button>\n            <CreateGroupChatDialog\n                isDialogOpen={isDialogOpen}\n                closeDialogHandler={handleCloseGroupChatDialog}\n            />\n        </>\n    );\n};\n\nexport default CreateGroupChatButton;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport Button from \"@mui/material/Button\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { useTheme } from \"@mui/material/styles\";\nimport { Tooltip } from \"@mui/material\";\nimport Typography from \"@mui/material/Typography\";\nimport { setChosenGroupChatDetails } from \"../../../../actions/chatActions\";\nimport { useAppSelector } from \"../../../../store\";\nimport { GroupChatDetails } from \"../../../../actions/types\";\n\ninterface GroupChatListItemProps {\n    chat: GroupChatDetails\n}\n\nconst GroupChatListItem = ({ chat }: GroupChatListItemProps) => {\n    const theme = useTheme();\n    const matches = useMediaQuery(theme.breakpoints.up(\"sm\"));\n    const dispatch = useDispatch();\n\n    const { chosenGroupChatDetails } = useAppSelector((state) => state.chat);\n\n    const isChatActive = chosenGroupChatDetails?.groupId === chat.groupId;\n\n    return (\n        <Tooltip title={chat.groupName}>\n            <Button\n                onClick={() => {\n                    dispatch(setChosenGroupChatDetails(chat));\n                }}\n                style={{\n                    width: \"100%\",\n                    height: \"42px\",\n                    marginTop: \"15px\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"flex-start\",\n                    textTransform: \"none\",\n                    color: \"black\",\n                    position: \"relative\",\n                    backgroundColor: isChatActive ? \"#36393f\" : \"transparent\",\n                }}\n            >\n                {/* {matches && <Avatar username={username} />} */}\n\n                <div\n                    style={{\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"flex-start\",\n                        justifyContent: \"center\",\n                    }}\n                >\n                    <Typography\n                        style={{\n                            marginLeft: \"7px\",\n                            fontWeight: 700,\n                            color: \"#8e9297\",\n                        }}\n                        variant=\"subtitle1\"\n                        align=\"left\"\n                    >\n                        {chat.groupName}\n                    </Typography>\n                </div>\n            </Button>\n        </Tooltip>\n    );\n};\n\nexport default GroupChatListItem;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport { useAppSelector } from \"../../../../store\";\nimport GroupChatListItem from \"./GroupChatListItem\";\n\n\nconst MainContainer = styled(\"div\")({\n    flexGrow: 1,\n    width: \"100%\",\n    margin: \"20px 0\",\n});\n\nconst GroupChatList = () => {\n    const { groupChatList } = useAppSelector((state) => state.friends);\n\n    return (\n        <MainContainer>\n            {groupChatList.map((chat) => (\n                <GroupChatListItem\n                    chat={chat}\n                    key={chat.groupId}\n                />\n            ))}\n        </MainContainer>\n    );\n};\n\nexport default GroupChatList;\n","import React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport { joinRoom } from \"../../../socket/roomHandler\";\nimport Avatar from \"../../../components/Avatar\";\nimport { ActiveRoom } from \"../../../actions/types\";\n\n\ninterface Props {\n    creatorUsername: string;\n    isUserInRoom: boolean;\n    room: ActiveRoom;\n    alreadyInDirectCall: boolean\n}\n\nconst ActiveRoomButton = ({\n    creatorUsername,\n    isUserInRoom,\n    room,\n    alreadyInDirectCall\n}: Props) => {\n\n    const handleJoinActiveRoom = () => {\n        // if (amountOfParticipants < 4) {\n        //     joinRoom(room);\n        // }\n\n        joinRoom(room);\n    };\n\n    const amountOfParticipants = room.participants.length;\n    const activeRoomButtonDisabled = alreadyInDirectCall // || amountOfParticipants > 3;\n    const roomTitle = `Creator: ${creatorUsername}. Connected: ${amountOfParticipants}`;\n\n\n    return (\n        <Tooltip title={roomTitle}>\n            <div>\n                <Button\n                    style={{\n                        width: \"48px\",\n                        height: \"48px\",\n                        borderRadius: \"16px\",\n                        margin: 0,\n                        padding: 0,\n                        minWidth: 0,\n                        marginTop: \"10px\",\n                        color: \"white\",\n                        backgroundColor: \"#5865F2\",\n                    }}\n                    disabled={activeRoomButtonDisabled || isUserInRoom}\n                    onClick={handleJoinActiveRoom}\n                >\n                    <Avatar username={creatorUsername} />\n                </Button>\n            </div>\n        </Tooltip>\n    );\n}\n\nexport default ActiveRoomButton;\n","import React from \"react\";\nimport { styled } from \"@mui/system\";\nimport ActiveRoomButton from \"./ActiveRoomButton\";\nimport { useAppSelector } from \"../../../store\";\n\nconst MainContainer = styled(\"div\")({\n    flexGrow: 1,\n    display: \"flex\",\n    gap: \"10px\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    margin: \"20px 0\",\n});\n\nconst ActiveRooms = () => {\n    const {\n        room: { activeRooms, isUserInRoom },\n        auth: { userDetails },\n        videoChat: { localStream }\n    } = useAppSelector((state) => state);\n    console.log(activeRooms)\n    return (\n        <MainContainer>\n            {activeRooms.map((room) => (\n                <ActiveRoomButton\n                    creatorUsername={\n                        userDetails?._id === room.roomCreator.userId\n                            ? \"ME\"\n                            : room.roomCreator.username\n                    }\n                    key={room.roomId}\n                    isUserInRoom={isUserInRoom}\n                    room={room}\n                    alreadyInDirectCall={!!localStream}\n                />\n            ))}\n        </MainContainer>\n    );\n};\n\n\nexport default ActiveRooms;\n","import * as React from \"react\";\nimport { useAppSelector } from \"../../.././store\";\nimport Box from \"@mui/material/Box\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport Divider from \"@mui/material/Divider\";\nimport Drawer from \"@mui/material/Drawer\";\nimport IconButton from \"@mui/material/IconButton\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport VideoChat from \"../../../components/VideoChat\";\nimport IncomingCall from \"../../../components/IncomingCall\";\nimport Messenger from \"../Messenger/Messenger\";\nimport AddFriendButton from \"../FriendsSideBar/AddFriendButton\";\nimport FriendsList from \"../FriendsSideBar/FriendsList/FriendsList\";\nimport FriendsTitle from \"../FriendsSideBar/FriendsTitle\";\nimport PendingInvitationsList from \"../FriendsSideBar/PendingInvitationsList/PendingInvitationsList\";\nimport DropDownMenu from \"./DropdownMenu\";\nimport CreateRoomButton from \"./CreateRoomButton\";\nimport CreateGroupChatButton from \"./CreateGroupChatButton\";\nimport GroupChatList from \"../FriendsSideBar/GroupChatList\";\nimport ActiveRooms from \"../ActiveRooms\";\n\nconst drawerWidth = 240;\n\ninterface Props {\n    window?: () => Window;\n    localStream: MediaStream | null;\n    isUserInRoom: boolean;\n    hasFriends: boolean;\n    hasGroupChats: boolean;\n    hasActiveRooms: boolean;\n    hasInvitations: boolean;\n}\n\nexport default function ResponsiveDrawer(props: Props) {\n    const { window } = props;\n    const [mobileOpen, setMobileOpen] = React.useState(false);\n\n    const handleDrawerToggle = () => {\n        setMobileOpen(!mobileOpen);\n    };\n\n    const drawerContent = (\n        <div\n            style={{\n                backgroundColor: \"#2F3136\",\n                height: \"100%\",\n                overflowY: \"auto\",\n                padding: \"5px 15px\",\n            }}\n        >\n            <div\n                style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"space-between\",\n                    margin: \"10px 0\",\n                }}\n            >\n                <AddFriendButton />\n                <DropDownMenu />\n            </div>\n            <Divider />\n            <div\n                style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"space-around\",\n                    margin: \"10px 0\",\n                }}\n            >\n                <CreateGroupChatButton />\n                <CreateRoomButton isUserInRoom={props.isUserInRoom} />\n            </div>\n\n            {props.hasActiveRooms && (\n                <>\n                    <FriendsTitle title=\"Active Rooms\" />\n                    <ActiveRooms />\n                    <Divider />\n                </>\n            )}\n\n            {props.hasFriends && (\n                <>\n                    <FriendsTitle title=\"Private Messages\" />\n                    <FriendsList />\n                    <Divider />\n                </>\n            )}\n\n            {props.hasGroupChats && (\n                <>\n                    <FriendsTitle title=\"Group Chats\" />\n                    <GroupChatList />\n                    <Divider />\n                </>\n            )}\n\n            {props.hasInvitations && (\n                <>\n                    <FriendsTitle title=\"Invitations\" />\n                    <PendingInvitationsList />\n                    <Divider />\n                </>\n            )}\n        </div>\n    );\n\n    const container =\n        window !== undefined ? () => window().document.body : undefined;\n\n    return (\n        <Box sx={{ display: \"flex\" }}>\n            <CssBaseline />\n\n            <IconButton\n                style={{\n                    position: \"fixed\",\n                    top: 10,\n                    left: 17,\n                    zIndex: 1000,\n                    color: \"white\",\n                }}\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={handleDrawerToggle}\n                sx={{ mr: 2, display: { sm: \"none\" } }}\n            >\n                <MenuIcon />\n            </IconButton>\n            <Box\n                component=\"nav\"\n                sx={{ width: { sm: drawerWidth }, flexShrink: { sm: 0 } }}\n                aria-label=\"mailbox folders\"\n            >\n                <Drawer\n                    container={container}\n                    variant=\"temporary\"\n                    open={mobileOpen}\n                    onClose={handleDrawerToggle}\n                    ModalProps={{\n                        keepMounted: true,\n                    }}\n                    sx={{\n                        display: { xs: \"block\", sm: \"none\" },\n                        \"& .MuiDrawer-paper\": {\n                            boxSizing: \"border-box\",\n                            width: drawerWidth,\n                        },\n                    }}\n                >\n                    {drawerContent}\n                </Drawer>\n                <Drawer\n                    variant=\"permanent\"\n                    sx={{\n                        display: { xs: \"none\", sm: \"block\" },\n                        \"& .MuiDrawer-paper\": {\n                            boxSizing: \"border-box\",\n                            width: drawerWidth,\n                        },\n                    }}\n                    open\n                >\n                    {drawerContent}\n                </Drawer>\n            </Box>\n            <Box\n                component=\"main\"\n                sx={{\n                    flexGrow: 1,\n                    display: \"flex\",\n                    background: \"red\",\n                    width: {\n                        xs: `calc(100vw)`,\n                        sm: `calc(100vw - ${drawerWidth}px)`,\n                    },\n                }}\n            >\n                <Messenger />\n                {props.localStream && <VideoChat />}\n                <IncomingCall />\n            </Box>\n        </Box>\n    );\n}\n","import React, { useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { styled } from \"@mui/system\";\nimport { connectWithSocketServer, UserDetails } from \"../../socket/socketConnection\";\nimport { useAppSelector } from \"../../store\";\nimport ResponsiveDrawer from \"./Drawer\";\n\nconst Wrapper = styled(\"div\")({\n    width: \"100%\",\n    height: \"100vh\",\n    display: \"flex\",\n});\n\nconst Dashboard = () => {\n    const {\n        auth: { userDetails },\n        videoChat: { localStream },\n        room: { isUserInRoom = false, localStreamRoom = null, activeRooms = [] } = {},\n        friends: { friends = [], pendingInvitations = [] },\n        friends: { groupChatList = [] },\n    } = useAppSelector((state) => state);\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const isLoggedIn = userDetails?.token;\n\n        if (!isLoggedIn) {\n            navigate(\"/login\");\n        } else {\n            connectWithSocketServer(userDetails as UserDetails);\n        }\n    }, [userDetails, navigate]);\n\n    return (\n        <Wrapper>\n            <ResponsiveDrawer\n                localStream={localStream || localStreamRoom}\n                isUserInRoom={isUserInRoom}\n                hasFriends={friends.length > 0}\n                hasGroupChats={groupChatList.length > 0}\n                hasActiveRooms={activeRooms.length > 0}\n                hasInvitations={pendingInvitations.length > 0}\n            />\n        </Wrapper>\n    );\n};\n\nexport default Dashboard;\n","export default __webpack_public_path__ + \"static/media/sirun-logo.3ccb0894.png\";","import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Typography, Box, Button, Tooltip, IconButton, Paper, Divider } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport Visibility from \"@mui/icons-material/Visibility\";\nimport VisibilityOff from \"@mui/icons-material/VisibilityOff\";\nimport { validateLoginForm } from \"../utils/validators\";\nimport { useAppSelector } from \"../store\";\nimport { loginUser } from \"../actions/authActions\";\nimport SirunLogo from \"../assets/sirun-logo.png\";\n\nconst Background = styled(Box)({\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    minHeight: \"100vh\",\n    background: \"radial-gradient(circle at top left, #1f2235, #141625)\",\n    padding: \"20px\",\n});\n\nconst FormCard = styled(Paper)({\n    padding: \"40px 35px\",\n    maxWidth: \"400px\",\n    width: \"100%\",\n    background: \"#1e1f2b\",\n    borderRadius: \"15px\",\n    boxShadow: \"0px 10px 25px rgba(0, 0, 0, 0.6)\",\n    textAlign: \"center\",\n    color: \"#d9d9d9\",\n    position: \"relative\",\n    animation: \"fadeIn 1s ease-out\",\n    \"@keyframes fadeIn\": {\n        from: { opacity: 0, transform: \"translateY(20px)\" },\n        to: { opacity: 1, transform: \"translateY(0)\" },\n    },\n    \"@media (max-width: 600px)\": {\n        padding: \"30px 20px\",\n        maxWidth: \"90%\",\n    },\n});\n\nconst Logo = styled(\"img\")({\n    width: \"70px\",\n    height: \"70px\",\n    marginBottom: \"25px\",\n    filter: \"brightness(1.3) contrast(1.1)\",\n});\n\nconst Label = styled(Typography)({\n    color: \"#b3b5c3\",\n    fontSize: \"0.85rem\",\n    fontWeight: 600,\n    marginBottom: \"8px\",\n    textAlign: \"left\",\n    \"@media (max-width: 600px)\": {\n        fontSize: \"0.8rem\",\n    },\n});\n\nconst Input = styled(\"input\")({\n    width: \"100%\",\n    height: \"45px\",\n    border: \"1px solid #3a3b4d\",\n    borderRadius: \"8px\",\n    background: \"#252738\",\n    padding: \"0 15px\",\n    color: \"#e0e0e0\",\n    fontSize: \"1rem\",\n    marginBottom: \"20px\",\n    outline: \"none\",\n    transition: \"border-color 0.3s\",\n    \"&:focus\": {\n        borderColor: \"#5865f2\",\n        boxShadow: \"0 0 8px rgba(88, 101, 242, 0.5)\",\n    },\n    \"@media (max-width: 600px)\": {\n        height: \"40px\",\n    },\n});\n\nconst ErrorText = styled(\"p\")({\n    color: \"#ff4d4d\",\n    fontSize: \"0.85rem\",\n    marginTop: \"-15px\",\n    marginBottom: \"10px\",\n    \"@media (max-width: 600px)\": {\n        fontSize: \"0.75rem\",\n    },\n});\n\nconst StyledButton = styled(Button)({\n    width: \"100%\",\n    height: \"50px\",\n    fontSize: \"1rem\",\n    fontWeight: 600,\n    background: \"linear-gradient(135deg, #5865f2, #4c55d3)\",\n    color: \"#ffffff\",\n    textTransform: \"none\",\n    borderRadius: \"10px\",\n    boxShadow: \"0px 4px 12px rgba(88, 101, 242, 0.4)\",\n    transition: \"background 0.3s, box-shadow 0.3s\",\n    \"&:hover\": {\n        background: \"linear-gradient(135deg, #4c55d3, #3b44b0)\",\n        boxShadow: \"0px 4px 16px rgba(88, 101, 242, 0.6)\",\n    },\n    \"@media (max-width: 600px)\": {\n        height: \"45px\",\n        fontSize: \"0.9rem\",\n    },\n});\n\nconst RedirectText = styled(\"span\")({\n    color: \"#00aff4\",\n    fontWeight: 500,\n    cursor: \"pointer\",\n    transition: \"color 0.3s\",\n    \"&:hover\": {\n        color: \"#008ecc\",\n    },\n    \"@media (max-width: 600px)\": {\n        fontSize: \"0.85rem\",\n    },\n});\n\nconst Login = () => {\n    const navigate = useNavigate();\n    const [credentials, setCredentials] = useState({\n        email: \"\",\n        password: \"\"\n    });\n    const [isFormValid, setIsFormValid] = useState(false);\n    const [showPassword, setShowPassword] = useState(false);\n    const [errors, setErrors] = useState<{ [key: string]: string }>({});\n    const dispatch = useDispatch();\n    const { userDetails } = useAppSelector((state) => state.auth);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setCredentials((prev) => ({ ...prev, [name]: value }));\n        setErrors((prev) => ({ ...prev, [name]: \"\" }));\n    };\n\n    const handleLogin = () => {\n        const validationErrors = validateLoginForm(credentials);\n        console.log(\"Validation errors:\", validationErrors); // Debugging line\n        if (Object.keys(validationErrors).length === 0) {\n            setErrors({});\n            console.log(\"Dispatching login with credentials:\", credentials); // Debugging line\n            dispatch(loginUser(credentials));\n        } else {\n            setErrors(validationErrors);\n            console.log(\"Form validation failed with errors:\", validationErrors); // Debugging line\n            return;\n        }\n    };\n\n    useEffect(() => {\n        setIsFormValid(Object.keys(validateLoginForm(credentials)).length === 0);\n    }, [credentials]);\n\n    useEffect(() => {\n        console.log(\"User details after login:\", userDetails); // Debugging line\n        if (userDetails?.token) {\n            navigate(\"/dashboard\");\n        }\n    }, [userDetails, navigate]);\n\n    const togglePasswordVisibility = () => {\n        setShowPassword((prev) => !prev);\n    };\n\n    return (\n        <Background>\n            <FormCard elevation={4}>\n                <Logo src={SirunLogo} alt=\"Sirun Logo\" />\n                <Typography variant=\"h5\" sx={{ color: \"white\", fontWeight: \"bold\", mb: 3 }}>\n                    Welcome Back to Sirun\n                </Typography>\n                <Typography sx={{ color: \"#b3b5c3\", mb: 3, fontSize: \"0.95rem\" }}>\n                    Log in to continue connecting with friends.\n                </Typography>\n                <Divider sx={{ mb: 3, borderColor: \"#44475a\" }} />\n\n                <Box sx={{ textAlign: \"left\" }}>\n                    <Label>Email</Label>\n                    <Input\n                        type=\"email\"\n                        placeholder=\"Enter your email\"\n                        name=\"email\"\n                        value={credentials.email}\n                        onChange={handleChange}\n                    />\n                    {errors.email && <ErrorText>{errors.email}</ErrorText>}\n                </Box>\n\n                <Box sx={{ textAlign: \"left\" }}>\n                    <Label>Password</Label>\n                    <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                        <Input\n                            type={showPassword ? \"text\" : \"password\"}\n                            placeholder=\"Enter password\"\n                            name=\"password\"\n                            value={credentials.password}\n                            onChange={handleChange}\n                            style={{ flexGrow: 1 }}\n                        />\n                        <IconButton onClick={togglePasswordVisibility} sx={{ color: \"#72767d\" }}>\n                            {showPassword ? <VisibilityOff /> : <Visibility />}\n                        </IconButton>\n                    </Box>\n                    {errors.password && <ErrorText>{errors.password}</ErrorText>}\n                </Box>\n\n                <Tooltip\n                    title={\n                        isFormValid\n                            ? \"Proceed to Log In\"\n                            : \"Ensure your email and password meet the requirements.\"\n                    }\n                >\n                    <StyledButton\n                        variant=\"contained\"\n                        disabled={!isFormValid}\n                        onClick={handleLogin}\n                    >\n                        Log In\n                    </StyledButton>\n                </Tooltip>\n\n                <Typography sx={{ color: \"#72767d\", mt: 3 }} variant=\"subtitle2\">\n                    Don't have an account?{\" \"}\n                    <RedirectText onClick={() => navigate(\"/register\")}>\n                        Sign Up\n                    </RedirectText>\n                </Typography>\n            </FormCard>\n        </Background>\n    );\n};\n\nexport default Login;\n","import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Typography, Box, Button, Tooltip, IconButton, Paper, Divider } from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport Visibility from \"@mui/icons-material/Visibility\";\nimport VisibilityOff from \"@mui/icons-material/VisibilityOff\";\nimport { validateRegisterForm } from \"../utils/validators\"; // Ensure this function returns an object\nimport { useAppSelector } from \"../store\";\nimport { registerUser } from \"../actions/authActions\";\nimport SirunLogo from \"../assets/sirun-logo.png\";\n\nconst Background = styled(Box)({\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    minHeight: \"100vh\",\n    background: \"radial-gradient(circle at top left, #1f2235, #141625)\",\n    padding: \"20px\",\n});\n\nconst FormCard = styled(Paper)({\n    padding: \"40px 35px\",\n    maxWidth: \"400px\",\n    width: \"100%\",\n    background: \"#1e1f2b\",\n    borderRadius: \"15px\",\n    boxShadow: \"0px 10px 25px rgba(0, 0, 0, 0.6)\",\n    textAlign: \"center\",\n    color: \"#d9d9d9\",\n    position: \"relative\",\n    animation: \"fadeIn 1s ease-out\",\n    \"@keyframes fadeIn\": {\n        from: { opacity: 0, transform: \"translateY(20px)\" },\n        to: { opacity: 1, transform: \"translateY(0)\" },\n    },\n    \"@media (max-width: 600px)\": {\n        padding: \"30px 20px\",\n        maxWidth: \"90%\",\n    },\n});\n\nconst Logo = styled(\"img\")({\n    width: \"70px\",\n    height: \"70px\",\n    marginBottom: \"25px\",\n    filter: \"brightness(1.3) contrast(1.1)\",\n});\n\nconst Label = styled(Typography)({\n    color: \"#b3b5c3\",\n    fontSize: \"0.85rem\",\n    fontWeight: 600,\n    marginBottom: \"8px\",\n    textAlign: \"left\",\n    \"@media (max-width: 600px)\": {\n        fontSize: \"0.8rem\",\n    },\n});\n\nconst Input = styled(\"input\")({\n    width: \"100%\",\n    height: \"45px\",\n    border: \"1px solid #3a3b4d\",\n    borderRadius: \"8px\",\n    background: \"#252738\",\n    padding: \"0 15px\",\n    color: \"#e0e0e0\",\n    fontSize: \"1rem\",\n    marginBottom: \"20px\",\n    outline: \"none\",\n    transition: \"border-color 0.3s\",\n    \"&:focus\": {\n        borderColor: \"#5865f2\",\n        boxShadow: \"0 0 8px rgba(88, 101, 242, 0.5)\",\n    },\n    \"@media (max-width: 600px)\": {\n        height: \"40px\",\n    },\n});\n\nconst ErrorText = styled(\"p\")({\n    color: \"#ff4d4d\",\n    fontSize: \"0.85rem\",\n    marginTop: \"-15px\",\n    marginBottom: \"10px\",\n    \"@media (max-width: 600px)\": {\n        fontSize: \"0.75rem\",\n    },\n});\n\nconst StyledButton = styled(Button)({\n    width: \"100%\",\n    height: \"50px\",\n    fontSize: \"1rem\",\n    fontWeight: 600,\n    background: \"linear-gradient(135deg, #5865f2, #4c55d3)\",\n    color: \"#ffffff\",\n    textTransform: \"none\",\n    borderRadius: \"10px\",\n    boxShadow: \"0px 4px 12px rgba(88, 101, 242, 0.4)\",\n    transition: \"background 0.3s, box-shadow 0.3s\",\n    \"&:hover\": {\n        background: \"linear-gradient(135deg, #4c55d3, #3b44b0)\",\n        boxShadow: \"0px 4px 16px rgba(88, 101, 242, 0.6)\",\n    },\n    \"@media (max-width: 600px)\": {\n        height: \"45px\",\n        fontSize: \"0.9rem\",\n    },\n});\n\nconst RedirectText = styled(\"span\")({\n    color: \"#00aff4\",\n    fontWeight: 500,\n    cursor: \"pointer\",\n    transition: \"color 0.3s\",\n    \"&:hover\": {\n        color: \"#008ecc\",\n    },\n    \"@media (max-width: 600px)\": {\n        fontSize: \"0.85rem\",\n    },\n});\n\nconst Register = () => {\n    const navigate = useNavigate();\n    const [credentials, setCredentials] = useState({\n        email: \"\",\n        password: \"\",\n        username: \"\"\n    });\n    const [isFormValid, setIsFormValid] = useState(false);\n    const [showPassword, setShowPassword] = useState(false);\n    const [errors, setErrors] = useState<{ [key: string]: string }>({});\n    const dispatch = useDispatch();\n    const { userDetails } = useAppSelector((state) => state.auth);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setCredentials((prev) => ({ ...prev, [name]: value }));\n        setErrors((prev) => ({ ...prev, [name]: \"\" }));\n    };\n\n    const handleRegister = () => {\n        const validationErrors = validateRegisterForm(credentials);\n        if (Object.keys(validationErrors).length > 0) {\n            setErrors(validationErrors);\n            return;\n        }\n        dispatch(registerUser(credentials));\n    };\n\n    useEffect(() => {\n        setIsFormValid(Object.keys(validateRegisterForm(credentials)).length === 0);\n    }, [credentials]);\n\n    useEffect(() => {\n        if (userDetails?.token) {\n            // Redirect to login instead of dashboard\n            navigate(\"/login\");\n        }\n    }, [userDetails, navigate]);\n\n    const togglePasswordVisibility = () => {\n        setShowPassword((prev) => !prev);\n    };\n\n    return (\n        <Background>\n            <FormCard elevation={4}>\n                <Logo src={SirunLogo} alt=\"Sirun Logo\" />\n                <Typography variant=\"h5\" sx={{ color: \"white\", fontWeight: \"bold\", mb: 3 }}>\n                    Join Sirun Today\n                </Typography>\n                <Typography sx={{ color: \"#b3b5c3\", mb: 3, fontSize: \"0.95rem\" }}>\n                    Create an account to connect with friends securely.\n                </Typography>\n                <Divider sx={{ mb: 3, borderColor: \"#44475a\" }} />\n\n                <Box sx={{ textAlign: \"left\" }}>\n                    <Label>Username</Label>\n                    <Input\n                        type=\"text\"\n                        placeholder=\"Enter your username\"\n                        name=\"username\"\n                        value={credentials.username}\n                        onChange={handleChange}\n                    />\n                    {errors.username && <ErrorText>{errors.username}</ErrorText>}\n                </Box>\n\n                <Box sx={{ textAlign: \"left\" }}>\n                    <Label>Email</Label>\n                    <Input\n                        type=\"email\"\n                        placeholder=\"Enter your email\"\n                        name=\"email\"\n                        value={credentials.email}\n                        onChange={handleChange}\n                    />\n                    {errors.email && <ErrorText>{errors.email}</ErrorText>}\n                </Box>\n\n                <Box sx={{ textAlign: \"left\" }}>\n                    <Label>Password</Label>\n                    <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                        <Input\n                            type={showPassword ? \"text\" : \"password\"}\n                            placeholder=\"Enter password\"\n                            name=\"password\"\n                            value={credentials.password}\n                            onChange={handleChange}\n                            style={{ flexGrow: 1 }}\n                        />\n                        <IconButton onClick={togglePasswordVisibility} sx={{ color: \"#72767d\" }}>\n                            {showPassword ? <VisibilityOff /> : <Visibility />}\n                        </IconButton>\n                    </Box>\n                    {errors.password && <ErrorText>{errors.password}</ErrorText>}\n                </Box>\n\n                <Tooltip\n                    title={\n                        isFormValid\n                            ? \"Proceed to Register\"\n                            : \"Ensure your email, username, and password meet the requirements.\"\n                    }\n                >\n                    <StyledButton\n                        variant=\"contained\"\n                        disabled={!isFormValid}\n                        onClick={handleRegister}\n                    >\n                        Sign Up\n                    </StyledButton>\n                </Tooltip>\n\n                <Typography sx={{ color: \"#72767d\", mt: 3 }} variant=\"subtitle2\">\n                    Already have an account?{\" \"}\n                    <RedirectText onClick={() => navigate(\"/login\")}>\n                        Log In\n                    </RedirectText>\n                </Typography>\n            </FormCard>\n        </Background>\n    );\n};\n\nexport default Register;\n","import React from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport Alert from \"@mui/material/Alert\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { hideAlert } from \"../actions/alertActions\";\nimport { useAppSelector } from \"../store\";\n\nconst AlertNotification = () => {\n    const dispatch = useDispatch();\n    const {open, message} = useAppSelector(state => state.alert) \n\n    const handleClose = () => {\n        dispatch(hideAlert())\n    }\n\n    return (\n        <Snackbar\n            anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n            open={open}\n            onClose={handleClose}\n            autoHideDuration={6000}\n        >\n            <Alert severity=\"info\">{message}</Alert>\n        </Snackbar>\n    );\n};\n\nexport default AlertNotification\n","import * as React from \"react\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport styled from \"@emotion/styled\";\n\nconst Wrapper = styled(\"div\")({\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"100%\",\n    height: \"100vh\",\n    backgroundColor: \"#2F3136\",\n});\n\nexport default function Loading() {\n    return (\n        <Wrapper>\n            <CircularProgress />\n        </Wrapper>\n    );\n}","import React, {useEffect} from 'react';\nimport {useDispatch} from \"react-redux\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\nimport { autoLogin } from './actions/authActions';\nimport Dashboard from './pages/Dashboard';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport AlertNotification from \"./components/AlertNotification\"\nimport { useAppSelector } from './store';\nimport Loading from './components/Loading';\n\nfunction App() {\n\n    const dispatch = useDispatch();\n    const { loading } = useAppSelector(\n        (state) => state.auth\n    ); \n\n  // auto login\n  useEffect(() => {\n    dispatch(autoLogin());\n  }, [dispatch])\n  \n\n  if(loading) {\n    return <Loading />\n  }\n  return (\n      <>\n          <BrowserRouter>\n              <Routes>\n                  <Route path=\"/register\" element={<Register />} />\n                  <Route path=\"/login\" element={<Login />} />\n                  <Route path=\"/dashboard\" element={<Dashboard />} />\n                  <Route path=\"*\" element={<Navigate to=\"/dashboard\" />} />\n              </Routes>\n          </BrowserRouter>\n          <AlertNotification />\n      </>\n  );\n}\n\nexport default App;\n","const isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  window.location.hostname === '[::1]' ||\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if ('serviceWorker' in navigator) {\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        checkValidServiceWorker(swUrl, config);\n\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      console.log('Service Worker registered with scope:', registration.scope);\n      \n      // Check for pushManager existence\n      if (registration.pushManager) {\n        registration.pushManager.getSubscription()\n          .then((subscription) => {\n            if (subscription) {\n              console.log('Push subscription exists:', subscription);\n            } else {\n              console.log('No existing push subscription found.');\n            }\n          })\n          .catch(error => {\n            console.error('Failed to retrieve push subscription:', error);\n          });\n      } else {\n        console.warn('Push Manager is not available in this context.');\n      }\n\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              console.log(\n                'New content is available; please close all tabs to see the update.'\n              );\n\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              console.log('Content is cached for offline use.');\n\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Service Worker registration failed:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { store } from './store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}